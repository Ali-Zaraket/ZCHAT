(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{12:function(e,t,s){},124:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),c=s(64),i=s.n(c),r=s(3),o=s(4),l=s(6),d=s(5),m=s(7),h=s(19),b=s(2),j="https://z-ch-at.herokuapp.com/api/users/",u="https://z-ch-at.herokuapp.com/api/rooms/",p="https://z-ch-at.herokuapp.com/api/posts/",O=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var s=document.cookie.split(";"),a=0;a<s.length;a++){var n=s[a].trim();if(n.substring(0,e.length+1)===e+"="){t=decodeURIComponent(n.substring(e.length+1));break}}return t},f=function(e){return e.slice(11,16)},v=s(34),x=s.n(v),g=function(){localStorage.removeItem("token"),localStorage.removeItem("id"),localStorage.removeItem("user"),x.a.get(j+"logout"),window.location.replace("/login")},N=function(e,t,s){localStorage.setItem("token",e),localStorage.setItem("id",t),localStorage.setItem("user",s)},y=function(){return!!localStorage.getItem("token")},k=(s(12),s(0)),w=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={username:"",password:"",error:null},a.handleFormSubmit=a.handleFormSubmit.bind(Object(b.a)(a)),a.handleFormChange=a.handleFormChange.bind(Object(b.a)(a)),a}return Object(o.a)(s,[{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var s={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":O("csrftoken")},body:JSON.stringify({username:this.state.username,password:this.state.password})};fetch("https://z-ch-at.herokuapp.com/api/users/login",s).then((function(e){return e.json()})).then((function(e){e.error&&t.setState({error:e.error}),e.token&&(N(e.token,e.id,e.username),t.props.history.push("/"))})).catch((function(e){console.log(e)}))}},{key:"toggle",value:function(){var e=document.getElementById("field-icon"),t=document.getElementById("password");"text"===t.type?(t.type="password",e.className="bi bi-eye-slash"):(t.type="text",e.className="bi bi-eye")}},{key:"handleFormChange",value:function(e){var t=e.target.value,s=e.target.name;this.setState(Object(h.a)({},s,t))}},{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{className:"container",children:[this.state.error?Object(k.jsxs)("div",{className:"alert alert-danger",id:"login-error",role:"alert",children:[this.state.error,Object(k.jsx)("span",{className:"bi bi-x",id:"delete-login-error",onClick:function(){e.setState({error:null})}})]}):null,Object(k.jsxs)("div",{className:"login-div",children:[Object(k.jsx)("legend",{className:"header",children:"Welcome back"}),Object(k.jsxs)("form",{onSubmit:this.handleFormSubmit,className:"login-form form-group",children:[Object(k.jsx)("div",{className:"pt-3 pb-3",children:Object(k.jsx)("input",{type:"text",name:"username",className:"entry",value:this.state.username,onChange:this.handleFormChange,placeholder:"Username"})}),Object(k.jsxs)("div",{className:"pt-3 pb-3",children:[Object(k.jsx)("input",{type:"password",name:"password",className:"entry",value:this.state.password,onChange:this.handleFormChange,placeholder:"Password",id:"password"}),Object(k.jsx)("span",{className:"bi bi-eye-slash",id:"field-icon",onClick:this.toggle.bind(this)})]}),Object(k.jsx)("div",{className:"button",children:Object(k.jsx)("div",{className:"row pt-4",children:Object(k.jsx)("button",{type:"submit",className:"btn btn-danger pt-2 pb-2",children:"Login"})})}),Object(k.jsx)("div",{className:"pt-4",children:Object(k.jsx)("a",{href:"/signup",className:"link",children:"Don't have an account yet ?"})})]})]})]})}}]),s}(a.Component),S=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"componentDidMount",value:function(){y()||window.location.replace("/login")}},{key:"render",value:function(){return Object(k.jsx)("div",{children:Object(k.jsx)("h1",{className:"display-5",align:"center",children:"Home"})})}}]),s}(a.Component),C=Object(m.e)(S),I=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={username:"",email:"",password1:"",password2:"",error:null},a.validateFormSubmit=a.validateFormSubmit.bind(Object(b.a)(a)),a}return Object(o.a)(s,[{key:"validateFormSubmit",value:function(){var e="valid";return this.state.password1!==this.state.password2?e="Passwords does not match ...":this.state.password1.length<8?e="Password must not be less than 8 characters..":this.state.password1.includes(this.state.username)?e="password cannot contain personal information..":isNaN(this.state.password1)||(e="Password cannot be entirely numeric.."),e}},{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var s=this.validateFormSubmit();if("valid"===s){var a={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":O("csrftoken")},body:JSON.stringify({username:this.state.username,email:this.state.email,password:this.state.password1})};fetch("https://z-ch-at.herokuapp.com/api/users/create",a).then((function(e){return e.json()})).then((function(e){e.error&&t.setState({error:e.error}),e.token&&(N(e.token,e.id,e.username),t.props.history.push("/"))}))}else this.setState({error:s})}},{key:"handleFormChange",value:function(e){var t=e.target.value,s=e.target.name;this.setState(Object(h.a)({},s,t))}},{key:"toggle",value:function(){var e=document.getElementById("field-icon"),t=document.getElementById("password");"text"===t.type?(t.type="password",e.className="bi bi-eye-slash"):(t.type="text",e.className="bi bi-eye")}},{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{className:"container",children:[this.state.error?Object(k.jsxs)("div",{className:"alert alert-danger",id:"login-error",role:"alert",children:[this.state.error,Object(k.jsx)("span",{className:"bi bi-x",id:"delete-register-error",onClick:function(){e.setState({error:null})}})]}):null,Object(k.jsxs)("div",{className:"login-div",children:[Object(k.jsx)("legend",{className:"header",children:"Join Now !"}),Object(k.jsxs)("form",{onSubmit:this.handleFormSubmit.bind(this),className:"login-form form-group",children:[Object(k.jsx)("div",{className:"pt-3 pb-3",children:Object(k.jsx)("input",{type:"text",name:"username",className:"entry",value:this.state.username,onChange:this.handleFormChange.bind(this),placeholder:"Username"})}),Object(k.jsx)("div",{className:"pt-3 pb-3",children:Object(k.jsx)("input",{type:"email",name:"email",className:"entry",value:this.state.email,onChange:this.handleFormChange.bind(this),placeholder:"username@email.com"})}),Object(k.jsxs)("div",{className:"pt-3 pb-3",children:[Object(k.jsx)("input",{type:"password",name:"password1",className:"entry",value:this.state.password1,onChange:this.handleFormChange.bind(this),placeholder:"Password",id:"password"}),Object(k.jsx)("span",{className:"bi bi-eye-slash",id:"field-icon",onClick:this.toggle.bind(this)})]}),Object(k.jsx)("div",{className:"pt-3 pb-3",children:Object(k.jsx)("input",{type:"password",name:"password2",className:"entry",value:this.state.password2,onChange:this.handleFormChange.bind(this),placeholder:"Confirm password"})}),Object(k.jsx)("div",{className:"button",children:Object(k.jsx)("div",{className:"row pt-4",children:Object(k.jsx)("button",{type:"submit",className:"btn btn-danger pt-2 pb-2",children:"Create"})})}),Object(k.jsx)("div",{className:"pt-4",children:Object(k.jsx)("a",{href:"/login",className:"link",children:"Already have an account ?"})})]})]})]})}}]),s}(a.Component),F=s(20),M=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={user:{},profile:{},isCurrentUser:!1,editing:!1,message:{},confirming:!1,newImage:null,roomsJoined:[],showRooms:!0},a.handleSettingsButtonClick=a.handleSettingsButtonClick.bind(Object(b.a)(a)),a.fetchProfile=a.fetchProfile.bind(Object(b.a)(a)),a.renderSettings=a.renderSettings.bind(Object(b.a)(a)),a.handleFormSubmit=a.handleFormSubmit.bind(Object(b.a)(a)),a.fetchUpdate=a.fetchUpdate.bind(Object(b.a)(a)),a.handleImageSubmit=a.handleImageSubmit.bind(Object(b.a)(a)),a.renderPopupConfirmation=a.renderPopupConfirmation.bind(Object(b.a)(a)),a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){y()?this.fetchProfile(!1):this.props.history.push("/")}},{key:"handleImageSubmit",value:function(e){e.preventDefault();var t=new FormData;t.append("image",this.state.newImage);this.fetchUpdate(t,{})}},{key:"handleFormSubmit",value:function(e){e.preventDefault();var t=JSON.stringify({user:this.state.user,profile:this.state.profile});this.fetchUpdate(t,{"Content-Type":"application/json"})}},{key:"fetchUpdate",value:function(e,t){var s=this;t["X-CSRFToken"]=O("csrftoken");fetch("https://z-ch-at.herokuapp.com/api/users/update",{method:"POST",headers:t,body:e}).then((function(e){return e.json()})).then((function(e){e.error?(s.setState({message:{type:"danger",content:e.error}}),s.fetchProfile(!0)):e.user.id&&(s.setState({editing:!1,message:{type:"success",content:"Successfully updated !"}}),s.fetchProfile(!1))}))}},{key:"fetchProfile",value:function(e){var t=this,s=this.props.match.params.userId;fetch(j+s).then((function(e){return e.json()})).then((function(s){t.setState({user:s.user,profile:s.profile,isCurrentUser:s.isCurrentUser,editing:e,roomsJoined:s.userRooms})}))}},{key:"handleDeleteAccountClick",value:function(){var e=this,t={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":O("csrftoken")},body:JSON.stringify({token:localStorage.getItem("token")})};fetch("https://z-ch-at.herokuapp.com/api/users/delete",t).then((function(e){return e.json()})).then((function(t){t.error?e.setState({message:{type:"danger",content:t.error}}):(localStorage.removeItem("token"),localStorage.removeItem("id"),localStorage.removeItem("user"),window.location.replace("/"))}))}},{key:"handleSettingsButtonClick",value:function(){this.setState({editing:!0})}},{key:"renderSettings",value:function(){var e=this;return Object(k.jsxs)("div",{className:"container mt-2",children:[this.state.confirming?this.renderPopupConfirmation():null,Object(k.jsxs)("div",{className:"profile-wrapper",children:[Object(k.jsxs)("div",{className:"row pb-3 border-bottom border-2",children:[Object(k.jsx)("div",{align:"center",children:Object(k.jsx)("img",{src:this.state.profile.image,alt:"profile",className:"rounded-circle",width:"150",height:"150"})}),Object(k.jsx)("form",{encType:"multipart/form-data",onSubmit:this.handleImageSubmit,children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsxs)("div",{className:"pb-3 pt-3 col-8",children:[Object(k.jsx)("label",{className:"label",children:"Profile Image*"}),Object(k.jsx)("input",{type:"file",onChange:function(t){e.setState({newImage:t.target.files[0]})}})]}),Object(k.jsx)("div",{className:"col-5 pb-1 pt-4",children:Object(k.jsx)("button",{type:"submit",className:"btn btn-success",children:"Update Image"})})]})})]}),Object(k.jsx)("div",{className:"mt-3",children:Object(k.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(k.jsxs)("div",{className:"pt-3 pb-3",children:[Object(k.jsx)("label",{className:"label",children:"Username*"}),Object(k.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.user.username,placeholder:"Username",onChange:function(t){e.setState({user:Object(F.a)(Object(F.a)({},e.state.user),{},{username:t.target.value})})},name:"userName"}),Object(k.jsx)("span",{children:"Username cannot contain symbols.."})]}),Object(k.jsxs)("div",{className:"pt-3 pb-3",children:[Object(k.jsx)("label",{className:"label",children:"Email*"}),Object(k.jsx)("input",{type:"email",required:!0,className:"form-control",value:this.state.user.email,placeholder:"Email",onChange:function(t){e.setState({user:Object(F.a)(Object(F.a)({},e.state.user),{},{email:t.target.value})})},name:"email"})]}),Object(k.jsxs)("div",{className:"pt-3 pb-3",children:[Object(k.jsx)("label",{className:"label",children:"Bio*"}),Object(k.jsx)("textarea",{type:"text",className:"form-control",value:this.state.profile.bio,placeholder:"Bio",onChange:function(t){e.setState({profile:Object(F.a)(Object(F.a)({},e.state.profile),{},{bio:t.target.value})})},name:"bio",height:"120"})]}),Object(k.jsx)("div",{align:"center",children:Object(k.jsxs)("div",{className:"row mt-3 mb-5",children:[Object(k.jsx)("div",{className:"col-6",children:Object(k.jsx)("button",{className:"btn btn-danger",onClick:function(){e.setState({editing:!1,confirming:!1})},children:"Back"})}),Object(k.jsx)("div",{className:"col-6",children:Object(k.jsx)("button",{className:"btn btn-success",type:"submit",children:"Update"})})]})})]})}),Object(k.jsx)("div",{className:"row pt-3 border-top border-light border-2",children:Object(k.jsxs)("button",{type:"submit",className:"btn btn-danger",onClick:function(){e.setState({confirming:!0})},children:["Delete Account ",Object(k.jsx)("span",{className:"bi bi-trash-fill",style:{color:"white",padding:"10px"}})]})})]})]})}},{key:"renderPopupConfirmation",value:function(){var e=this;return Object(k.jsxs)("div",{className:"popup",children:[Object(k.jsxs)("div",{className:"row border-bottom border-2 pb-4",children:[Object(k.jsx)("div",{className:"col-10",children:Object(k.jsx)("legend",{className:"display-6",children:"Confirm Delete Account"})}),Object(k.jsx)("div",{className:"col-1",children:Object(k.jsx)("span",{className:"bi bi-x icon",onClick:function(){return e.setState({confirming:!1})}})})]}),Object(k.jsx)("div",{className:"pt-4",children:Object(k.jsxs)("p",{children:["Are you sure to delete your account?",Object(k.jsx)("br",{}),"You will lose all activities ",Object(k.jsx)("br",{})]})}),Object(k.jsx)("div",{className:"row pt-3",children:Object(k.jsx)("button",{className:"btn btn-danger",onClick:this.handleDeleteAccountClick,children:"Delete Account"})})]})}},{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{className:"container pt-4",children:[this.state.message.content?Object(k.jsxs)("div",{className:"alert alert-".concat(this.state.message.type),id:"profile-msg",role:"alert",children:[this.state.message.content,Object(k.jsx)("i",{className:"bi bi-x",id:"delete-profile-msg",onClick:function(){e.setState({message:{}})}})]}):null,this.state.editing?this.renderSettings():Object(k.jsxs)("div",{className:"profile-wrapper",children:[Object(k.jsxs)("div",{className:"row pb-3",children:[Object(k.jsx)("div",{className:"col-4",children:Object(k.jsx)("img",{src:this.state.profile.image,alt:"profile",className:"rounded-circle",width:"150",height:"150"})}),Object(k.jsx)("div",{className:"col-6",children:Object(k.jsx)("h6",{className:"display-6 border-bottom border-2 border-light ml-4",style:{padding:25},children:this.state.user.username})}),this.state.isCurrentUser?Object(k.jsx)("div",{className:"col-2",children:Object(k.jsx)("span",{className:"bi bi-gear",id:"settings-button",onClick:this.handleSettingsButtonClick})}):null]}),Object(k.jsx)("div",{style:{width:300},className:"mt-4 pb-3",children:Object(k.jsx)("p",{children:this.state.profile.bio})}),Object(k.jsxs)("div",{className:"border-top border-2 pt-3",children:[Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-8",children:Object(k.jsxs)("label",{className:"ml-4 pb-2",style:{fontSize:"25px"},children:["Rooms Joined:  ",Object(k.jsx)("span",{className:"bi bi-caret-down-fill",style:{fontSize:"20px"},id:"toggleRooms",onClick:function(){"bi bi-caret-right-fill"===document.getElementById("toggleRooms").className?document.getElementById("toggleRooms").className="bi bi-caret-down-fill":document.getElementById("toggleRooms").className="bi bi-caret-right-fill",e.setState({showRooms:!e.state.showRooms})}})]})}),this.state.isCurrentUser?Object(k.jsx)("div",{className:"col-3",children:Object(k.jsx)("span",{className:"bi bi-plus-square",id:"add-room-button",onClick:function(){e.props.history.push("/rooms/create")}})}):null]}),this.state.showRooms?Object(k.jsx)("div",{className:"container ml-4 mr-4 pt-4",children:this.state.roomsJoined.map((function(e){return Object(k.jsx)("div",{className:"row roomDiv",children:Object(k.jsx)("div",{className:"col-8",children:Object(k.jsx)("a",{href:"/room/".concat(e.id,"/"),children:Object(k.jsx)("legend",{className:"display-6",children:e.name})})})})}))}):null]})]})]})}}]),s}(a.Component),D=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){return Object(k.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light pt-3 pb-3",children:Object(k.jsxs)("div",{className:"container-fluid",children:[Object(k.jsx)("a",{className:"navbar-brand",href:"/",children:"Z-Chat"}),Object(k.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(k.jsx)("span",{className:"navbar-toggler-icon"})}),Object(k.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavDropdown",children:this.props.authenticated?Object(k.jsx)("ul",{className:"navbar-nav",children:Object(k.jsxs)("li",{className:"nav-item dropdown",children:[Object(k.jsx)("a",{className:"nav-link dropdown-toggle",href:"",id:"navbarDropdownMenuLink",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Account"}),Object(k.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink",children:[Object(k.jsx)("li",{children:Object(k.jsx)("a",{className:"dropdown-item",href:"/users/"+localStorage.getItem("id"),children:"Profile"})}),Object(k.jsx)("li",{children:Object(k.jsx)("span",{className:"dropdown-item",onClick:g,children:"logout"})})]})]})}):Object(k.jsxs)("ul",{className:"navbar-nav",children:[Object(k.jsx)("li",{className:"nav-item",children:Object(k.jsx)("a",{href:"/login",className:"nav-link",children:"Login"})}),Object(k.jsx)("li",{className:"nav-item",children:Object(k.jsx)("a",{href:"/signup",className:"nav-link",children:"Signup"})})]})})]})})}}]),s}(a.Component),R=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={roomName:"",maxMembers:"",description:"",error:null},a.fetchCreateRoom=a.fetchCreateRoom.bind(Object(b.a)(a)),a.handleFormChange=a.handleFormChange.bind(Object(b.a)(a)),a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){y()||this.props.history.push("/login")}},{key:"fetchCreateRoom",value:function(){var e=this,t={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":O("csrftoken")},body:JSON.stringify({roomName:this.state.roomName,maxMembers:this.state.maxMembers,description:this.state.description})};fetch("https://z-ch-at.herokuapp.com/api/rooms/create",t).then((function(e){return e.json()})).then((function(t){console.log(t),t.error?e.setState({error:t.error}):window.location.replace("/room/"+t.id)}))}},{key:"handleFormSubmit",value:function(e){e.preventDefault(),this.fetchCreateRoom()}},{key:"handleFormChange",value:function(e){this.setState(Object(h.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return Object(k.jsx)("div",{className:"container pt-5",children:Object(k.jsxs)("div",{children:[Object(k.jsx)("legend",{className:"display-6",align:"center",children:"Create New Room"}),Object(k.jsxs)("form",{onSubmit:this.handleFormSubmit.bind(this),className:"login-form form-group",children:[Object(k.jsx)("div",{className:"pt-3 pb-3",children:Object(k.jsx)("input",{type:"text",name:"roomName",className:"entry",value:this.state.roomName,placeholder:"Room Name",onChange:this.handleFormChange})}),Object(k.jsx)("div",{className:"pt-3 pb-3",children:Object(k.jsx)("input",{type:"number",name:"maxMembers",className:"entry",value:this.state.maxMembers,placeholder:"Room max members number",min:"1",max:"25",onChange:this.handleFormChange})}),Object(k.jsx)("div",{className:"pt-3 pb-3",children:Object(k.jsx)("textarea",{type:"text",name:"description",className:"entry",maxlength:"40",value:this.state.description,placeholder:"description (in 40 characters)",onChange:this.handleFormChange})}),Object(k.jsx)("div",{className:"button",children:Object(k.jsx)("div",{className:"row pt-4",children:Object(k.jsx)("button",{type:"submit",className:"btn btn-danger pt-2 pb-2",children:"Create"})})})]})]})})}}]),s}(a.Component),P=s(37),T=s.n(P),U=s(66),A=s(67),B=s.n(A),E=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={message:null,messages:[]},a.sendMessage=a.sendMessage.bind(Object(b.a)(a)),a.loadMessages=a.loadMessages.bind(Object(b.a)(a)),a.fetchCreateMessage=a.fetchCreateMessage.bind(Object(b.a)(a)),a.renderSentMessage=a.renderSentMessage.bind(Object(b.a)(a)),a.renderReceivedMessage=a.renderReceivedMessage.bind(Object(b.a)(a)),a.scrollDiv=a.scrollDiv.bind(Object(b.a)(a)),a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.loadMessages(),this.socket=B()("https://zchatserver.herokuapp.com/",{withCredentials:!0}),this.socket.emit("join",{room:this.props.name}),this.socket.on("serverMSG",(function(t){if(t.sender){var s='\n          <div class="received-message">\n            <div class="row">\n              <div class="col-1"></div>\n              <div class="col-7">\n                <a href={"/users/'.concat(t.sender_id,'"}>\n                  <legend class="border-bottom">\n                    ').concat(t.sender,'\n                  </legend>\n                </a>\n              </div>\n              <div class="col-2">\n                <small class="text-dark">\n                  ').concat(f("12345678910"+t.created_at),'\n                </small>\n              </div>\n            </div>\n            <div style="padding-left: 10px;">\n              <text class="text-dark">\n                ').concat(t.content,"\n              </text>\n            </div>\n          </div>\n        ");t.sender_id===localStorage.getItem("id")&&(s='\n            <div class="row">\n              <div class="col-3"></div>\n              <div class="sent-message col-8">\n                <div class="row">\n                  <div class="col-1"></div>\n                  <div class="col-8">\n                    <text class="text-dark">\n                      '.concat(t.content,'\n                    </text>\n                  </div>\n                  <div class="col-2">\n                    <small class="text-dark">\n                      ').concat(f("12345678910"+t.created_at),"\n                    </small>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ")),document.getElementById("msgs").innerHTML+=s,e.scrollDiv()}}))}},{key:"loadMessages",value:function(){var e=this,t=u+this.props.roomId;fetch(t).then((function(e){return e.json()})).then((function(t){e.setState({messages:t.messages}),e.scrollDiv()}))}},{key:"scrollDiv",value:function(){var e=Object(U.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=document.getElementById("msgWrapper")).scrollTop=t.scrollHeight;case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCreateMessage",value:function(){var e=this,t={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":O("csrftoken")},body:JSON.stringify({roomID:this.props.roomId,message:this.state.message})};fetch("https://z-ch-at.herokuapp.com/api/messages/create",t).then((function(e){return e.json()})).then((function(t){t.message.id&&e.setState({message:""})}))}},{key:"sendMessage",value:function(e){if(e.preventDefault(),this.state.message){var t=this.state.message,s=(new Date).toLocaleTimeString();this.fetchCreateMessage(),this.socket.emit("roomMSG",{sender:localStorage.getItem("user"),sender_id:localStorage.getItem("id"),content:t,created_at:s,room:this.props.name})}}},{key:"renderSentMessage",value:function(e){return Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-3"}),Object(k.jsx)("div",{className:"sent-message col-8",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-1"}),Object(k.jsx)("div",{className:"col-8",children:Object(k.jsx)("text",{style:{color:"black"},children:e.content})}),Object(k.jsx)("div",{className:"col-2",children:Object(k.jsx)("small",{className:"text-dark",children:f(e.created_at)})})]})})]})}},{key:"renderReceivedMessage",value:function(e){return Object(k.jsxs)("div",{className:"received-message",children:[Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-1"}),Object(k.jsx)("div",{className:"col-7",children:Object(k.jsx)("a",{href:"/users/".concat(e.sender_id),children:Object(k.jsxs)("legend",{children:[e.sender,e.sender_id===this.props.admin?Object(k.jsx)("small",{className:"text-warning",style:{fontSize:"13px"},children:"   admin"}):null]})})}),Object(k.jsx)("div",{className:"col-2",children:Object(k.jsx)("small",{className:"text-dark",children:f(e.created_at)})})]}),Object(k.jsx)("div",{style:{paddingLeft:"10px"},children:Object(k.jsx)("text",{children:e.content})})]})}},{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{className:"container",children:[Object(k.jsx)("div",{id:"msgWrapper",children:Object(k.jsx)("div",{className:"pt-5",id:"msgs",children:this.state.messages.map((function(t){return t.sender_id!==parseInt(localStorage.getItem("id"))?e.renderReceivedMessage(t):e.renderSentMessage(t)}))})}),Object(k.jsx)("div",{children:Object(k.jsx)("form",{onSubmit:this.sendMessage,id:"msgForm",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-9",children:Object(k.jsx)("input",{placeholder:"enter message",value:this.state.message,type:"text",className:"form-control",onChange:function(t){return e.setState({message:t.target.value})}})}),Object(k.jsx)("div",{className:"col-1",children:Object(k.jsx)("button",{type:"submit",value:"submit",className:"btn btn-success",children:"send"})})]})})})]})}}]),s}(a.Component),L=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={posts:[],caption:"",image:null,showForm:!1},a.renderPost=a.renderPost.bind(Object(b.a)(a)),a.handleFormSubmit=a.handleFormSubmit.bind(Object(b.a)(a)),a.fetchDeletePost=a.fetchDeletePost.bind(Object(b.a)(a)),a.fetchPosts=a.fetchPosts.bind(Object(b.a)(a)),a.like=a.like.bind(Object(b.a)(a)),a.unlike=a.unlike.bind(Object(b.a)(a)),a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){this.fetchPosts()}},{key:"fetchPosts",value:function(){var e=this,t=u+this.props.roomId;fetch(t).then((function(e){return e.json()})).then((function(t){e.setState({posts:t.posts})}))}},{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var s=new FormData,a=this.state.image;null!==a&&s.append("image",a),s.append("caption",this.state.caption),s.append("room",this.props.roomId),s.append("creator",localStorage.getItem("id"));var n={method:"POST",headers:{"X-CSRFToken":O("csrftoken")},body:s};fetch("https://z-ch-at.herokuapp.com/api/posts/create",n).then((function(e){return e.json()})).then((function(e){console.log(e),e.creator&&t.setState({showForm:!1,caption:""})})),this.fetchPosts()}},{key:"fetchDeletePost",value:function(e){var t=this,s=e.id;fetch(p+s+"/delete").then((function(s){if(s.ok){var a=t.state.posts;a.splice(a.indexOf(e),1),t.setState({posts:a}),t.props.msgCallback({type:"success",content:"Post Deleted.."})}else t.props.msgCallback({type:"danger",content:"Something went wrong, try again later.."})}))}},{key:"like",value:function(e){var t=this,s=p+e.id+"/like";fetch(s).then((function(e){e.ok&&t.fetchPosts()}))}},{key:"unlike",value:function(e){var t=this,s=p+e.id+"/unlike";fetch(s).then((function(e){e.ok&&t.fetchPosts()}))}},{key:"renderPost",value:function(e){var t=this;return Object(k.jsxs)("div",{className:"post",children:[Object(k.jsxs)("div",{className:"row border-bottom border-light",children:[Object(k.jsx)("div",{className:"col-2",children:Object(k.jsx)("a",{href:"/users/".concat(e.creator_id),children:Object(k.jsx)("img",{src:e.creator_profile,alt:"Profile",className:"rounded-circle",height:"40",width:"40"})})}),Object(k.jsx)("div",{className:"col-8",children:Object(k.jsx)("legend",{className:"text-white pt-1",children:e.creator})}),Object(k.jsx)("div",{className:"col-1",children:function(e){var s=parseInt(localStorage.getItem("id"));return s===e.creator_id?Object(k.jsxs)("div",{className:"dropdown pt-2",style:{color:"white",float:"right"},children:[Object(k.jsx)("span",{className:"dropdown-toggle bi bi-three-dots-vertical",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}),Object(k.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(k.jsx)("li",{children:Object(k.jsxs)("span",{className:"dropdown-item",children:[Object(k.jsx)("span",{className:"bi bi-gear",onClick:null}),"  Edit"]})}),Object(k.jsx)("li",{children:Object(k.jsxs)("span",{className:"dropdown-item",onClick:function(){return t.fetchDeletePost(e)},children:[Object(k.jsx)("span",{className:"bi bi-trash"}),"  Delete"]})})]})]}):s===t.props.admin?Object(k.jsxs)("div",{className:"dropdown pt-2",style:{color:"white",float:"right"},children:[Object(k.jsx)("span",{className:"dropdown-toggle bi bi-three-dots-vertical",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}),Object(k.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:Object(k.jsx)("li",{children:Object(k.jsxs)("span",{className:"dropdown-item",onClick:function(){return t.fetchDeletePost(e)},children:[Object(k.jsx)("span",{className:"bi bi-trash"}),"  Delete"]})})})]}):null}(e)})]}),Object(k.jsx)("div",{className:"container pt-3",children:e.caption}),Object(k.jsx)("div",{className:"pt-2 pb-2",children:e.image?Object(k.jsx)("img",{src:e.image,alt:"post",height:"100%",width:"100%"}):null}),Object(k.jsx)("div",{style:{paddingLeft:"20px"},children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-1",children:e.liked?Object(k.jsx)("span",{className:"bi bi-heart-fill liked",onClick:function(){return t.unlike(e)}}):Object(k.jsx)("span",{className:"bi bi-heart notliked",onClick:function(){return t.like(e)}})}),Object(k.jsx)("div",{className:"col-1",style:{paddingTop:"6px"},children:Object(k.jsx)("span",{children:e.likes?e.likes:null})})]})})]})}},{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{className:"container pt-3",children:[Object(k.jsxs)("form",{encType:"multipart/form-data",onSubmit:this.handleFormSubmit,children:[Object(k.jsx)("textarea",{className:"postEntry",type:"text",required:!0,value:this.state.caption,onChange:function(t){return e.setState({caption:t.target.value})},placeholder:"What's in your mind ? POST!",onClick:function(){e.setState({showForm:!0})}}),this.state.showForm?Object(k.jsx)("div",{style:{paddingLeft:"20px"},children:Object(k.jsxs)("div",{className:"row pt-3",children:[Object(k.jsxs)("div",{className:"col-8",children:[Object(k.jsx)("h4",{className:"text-white",children:"Add an Image"}),Object(k.jsx)("input",{type:"file",onChange:function(t){e.setState({image:t.target.files[0]})}})]}),Object(k.jsx)("div",{className:"col-2 pt-3",children:Object(k.jsx)("button",{value:"submit",className:"btn btn-success",type:"submit",children:"Post"})})]})}):null]}),Object(k.jsx)("div",{id:"feedWrapper",children:this.state.posts.map((function(t){return e.renderPost(t)}))})]})}}]),s}(a.Component),_=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={room:{},isAdmin:!1,members:[],editing:!1,confirming:!1,message:{},showChat:!1},a.feedElement=n.a.createRef(),a.roomId=a.props.match.params.roomId,a.fetchRoom=a.fetchRoom.bind(Object(b.a)(a)),a.handleFormChange=a.handleFormChange.bind(Object(b.a)(a)),a.renderSettings=a.renderSettings.bind(Object(b.a)(a)),a.fetchUpdateRoom=a.fetchUpdateRoom.bind(Object(b.a)(a)),a.handleFormSubmit=a.handleFormSubmit.bind(Object(b.a)(a)),a.renderPopupConfirmation=a.renderPopupConfirmation.bind(Object(b.a)(a)),a.handleDeleteRoomClick=a.handleDeleteRoomClick.bind(Object(b.a)(a)),a.fetchLeaveRoom=a.fetchLeaveRoom.bind(Object(b.a)(a)),a.setMessageCallback=a.setMessageCallback.bind(Object(b.a)(a)),a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){y()?this.fetchRoom(!1):this.props.history.push("/login")}},{key:"fetchRoom",value:function(e){var t=this,s=u+this.roomId;fetch(s).then((function(e){return e.ok||window.location.replace("/rooms/create"),e.json()})).then((function(s){t.setState({room:s.room,isAdmin:s.isAdmin,members:s.members,editing:e})}))}},{key:"setMessageCallback",value:function(e){this.setState({message:e})}},{key:"fetchLeaveRoom",value:function(){var e=this,t=u+this.roomId+"/leave",s={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":O("csrftoken")},body:JSON.stringify({token:localStorage.getItem("token")})};fetch(t,s).then((function(t){t.ok?window.location.replace("/"):e.setState({message:{type:"danger",content:"Something went wrong try again later.."}})}))}},{key:"fetchUpdateRoom",value:function(){var e=this,t={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":O("csrftoken")},body:JSON.stringify({room:this.state.room})};fetch("https://z-ch-at.herokuapp.com/api/rooms/update",t).then((function(e){return e.json()})).then((function(t){t.error&&(e.setState({message:{type:"danger",content:t.error}}),e.fetchRoom(!0)),t.id&&(e.setState({editing:!1,message:{type:"success",content:"Successfully Updated.."}}),e.fetchRoom(!1))}))}},{key:"handleFormSubmit",value:function(e){e.preventDefault(),this.fetchUpdateRoom()}},{key:"handleFormChange",value:function(e){this.setState({room:Object(F.a)(Object(F.a)({},this.state.room),{},Object(h.a)({},e.target.name,e.target.value))})}},{key:"handleDeleteRoomClick",value:function(){var e=u+"delete/"+this.state.room.id;fetch(e).then((function(e){e.ok&&window.location.replace("/")}))}},{key:"renderPopupConfirmation",value:function(){var e=this;return Object(k.jsxs)("div",{className:"popup",children:[Object(k.jsxs)("div",{className:"row border-bottom border-2 pb-4",children:[Object(k.jsx)("div",{className:"col-10",children:Object(k.jsx)("legend",{className:"display-6",children:"Confirm Delete Room"})}),Object(k.jsx)("div",{className:"col-1",children:Object(k.jsx)("span",{className:"bi bi-x icon",onClick:function(){return e.setState({confirming:!1})}})})]}),Object(k.jsx)("div",{className:"pt-4",children:Object(k.jsxs)("p",{children:["Are you sure to delete this Room?",Object(k.jsx)("br",{})]})}),Object(k.jsx)("div",{className:"row pt-3",children:Object(k.jsx)("button",{className:"btn btn-danger",onClick:this.handleDeleteRoomClick,children:"Delete Room"})})]})}},{key:"renderSettings",value:function(){var e=this;return Object(k.jsxs)("div",{className:"container mt-2",children:[this.state.confirming?this.renderPopupConfirmation():null,Object(k.jsxs)("div",{className:"profile-wrapper",children:[Object(k.jsx)("div",{className:"row pb-3 border-bottom border-2",children:Object(k.jsx)("div",{align:"left",children:Object(k.jsx)("legend",{className:"display-6",children:this.state.room.name})})}),Object(k.jsx)("div",{className:"mt-3",children:Object(k.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(k.jsxs)("div",{className:"pt-3 pb-3",children:[Object(k.jsx)("label",{className:"label",children:"Room Name*"}),Object(k.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.room.name,placeholder:"Room Name",onChange:this.handleFormChange,name:"name"})]}),Object(k.jsxs)("div",{className:"pt-3 pb-3",children:[Object(k.jsx)("label",{className:"label",children:"Maximum Members"}),Object(k.jsx)("input",{type:"number",required:!0,className:"form-control",value:this.state.room.max_members,placeholder:"max members",onChange:this.handleFormChange,name:"max_members"})]}),Object(k.jsxs)("div",{className:"pt-3 pb-3",children:[Object(k.jsx)("label",{className:"label",children:"Description*"}),Object(k.jsx)("textarea",{type:"text",className:"form-control",value:this.state.room.description,placeholder:"description",onChange:this.handleFormChange,name:"description",height:"120"})]}),Object(k.jsx)("div",{align:"center",children:Object(k.jsxs)("div",{className:"row mt-3 mb-5",children:[Object(k.jsx)("div",{className:"col-6",children:Object(k.jsx)("button",{className:"btn btn-danger",onClick:function(){e.setState({editing:!1,confirming:!1})},children:"Back"})}),Object(k.jsx)("div",{className:"col-6",children:Object(k.jsx)("button",{className:"btn btn-success",type:"submit",children:"Update"})})]})})]})}),Object(k.jsx)("div",{className:"row pt-3 border-top border-light border-2",children:Object(k.jsxs)("button",{type:"submit",className:"btn btn-danger",onClick:function(){e.setState({confirming:!0})},children:["Delete Room ",Object(k.jsx)("span",{className:"bi bi-trash-fill",style:{color:"white",padding:"10px"}})]})})]})]})}},{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{className:"container pt-2",children:[this.state.message.content?Object(k.jsxs)("div",{className:"alert alert-".concat(this.state.message.type," pb-3"),id:"profile-msg",role:"alert",children:[this.state.message.content,Object(k.jsx)("i",{className:"bi bi-x",id:"delete-profile-msg",onClick:function(){e.setState({message:{}})}})]}):null,this.state.editing?this.renderSettings():Object(k.jsxs)("div",{children:[Object(k.jsxs)("div",{className:"profile-wrapper",children:[Object(k.jsxs)("div",{className:"row border-bottom border-light border-2",align:"left",children:[Object(k.jsx)("legend",{className:"display-6 col-7",children:this.state.room.name}),Object(k.jsxs)("div",{className:"dropdown col-5",children:[Object(k.jsx)("span",{className:"dropdown-toggle bi bi-three-dots-vertical",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",style:{float:"right"}}),this.state.isAdmin?Object(k.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(k.jsx)("li",{children:Object(k.jsxs)("a",{className:"dropdown-item",href:"add-user",children:[Object(k.jsx)("span",{className:"bi bi-person-plus"}),"  Add Member"]})}),Object(k.jsx)("li",{children:Object(k.jsxs)("span",{className:"dropdown-item",onClick:function(){return e.feedElement.current?e.feedElement.current.setState({showForm:!0}):null},children:[Object(k.jsx)("span",{className:"bi bi-file-post"}),"   New Post"]})}),Object(k.jsx)("li",{children:Object(k.jsxs)("span",{className:"dropdown-item",onClick:function(){return e.setState({editing:!0})},children:[Object(k.jsx)("span",{className:"bi bi-gear"}),"  Settings"]})}),Object(k.jsx)("li",{children:Object(k.jsxs)("a",{className:"dropdown-item",href:"members",children:[Object(k.jsx)("span",{className:"bi bi-person"}),"   Members"]})})]}):Object(k.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(k.jsx)("li",{children:Object(k.jsxs)("a",{className:"dropdown-item",href:"members",children:[Object(k.jsx)("span",{className:"bi bi-person"}),"   Members"]})}),Object(k.jsx)("li",{children:Object(k.jsxs)("span",{className:"dropdown-item",onClick:function(){return e.feedElement.current?e.feedElement.current.setState({showForm:!0}):null},children:[Object(k.jsx)("span",{className:"bi bi-file-post"}),"   New Post"]})}),Object(k.jsx)("li",{children:Object(k.jsxs)("a",{className:"dropdown-item",href:"#leave",onClick:this.fetchLeaveRoom,children:[Object(k.jsx)("span",{className:"bi bi-box-arrow-right"}),"   Leave"]})})]})]})]}),Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-8",children:Object(k.jsx)("small",{className:"text-light",children:this.state.room.description})}),Object(k.jsx)("div",{className:"col-4",children:Object(k.jsxs)("a",{className:"text-light",href:"members",children:["Members: ",this.state.members.length,"/",this.state.room.max_members,this.state.members.length===this.state.room.max_members?Object(k.jsx)("small",{className:"text-danger",children:"   Full"}):null]})})]})]}),Object(k.jsx)("div",{className:"pt-3",children:Object(k.jsxs)("div",{className:"row border-bottom",style:{padding:"5px"},children:[Object(k.jsx)("div",{className:"col-5",style:{marginLeft:"60px"},children:Object(k.jsx)("span",{className:"bi bi-newspaper",id:"navbtn",onClick:function(){e.setState({showChat:!1})},children:"   Feed"})}),Object(k.jsx)("div",{className:"col-5",style:{marginLeft:"10px"},children:Object(k.jsx)("span",{className:"bi bi-chat",id:"navbtn",onClick:function(){return e.setState({showChat:!0})},children:"   Chats"})})]})}),this.state.showChat?this.state.room.name?Object(k.jsx)(E,{roomId:this.roomId,name:this.state.room.name,admin:this.state.room.admin}):Object(k.jsx)("span",{className:"bi bi-hourglass-split"}):Object(k.jsx)(L,{roomId:this.roomId,ref:this.feedElement,admin:this.state.room.admin,msgCallback:this.setMessageCallback})]})]})}}]),s}(a.Component),z=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={users:[],error:null,searchUsers:[],searchTerm:""},a.roomId=a.props.match.params.roomId,a.fetchAddUser=a.fetchAddUser.bind(Object(b.a)(a)),a.fetchUsers=a.fetchUsers.bind(Object(b.a)(a)),a.handleChange=a.handleChange.bind(Object(b.a)(a)),a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){y()?this.fetchUsers():window.location.replace("/login")}},{key:"fetchAddUser",value:function(e){var t=this,s=u+this.roomId+"/add-user",a={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":O("csrftoken")},body:JSON.stringify({user:e})};fetch(s,a).then((function(e){return e.json()})).then((function(e){e.error?t.setState({error:e.error}):window.location.replace("/room/"+e.id)}))}},{key:"fetchUsers",value:function(){var e=this;fetch("https://z-ch-at.herokuapp.com/api/users/").then((function(e){return e.json()})).then((function(t){e.setState({users:t,searchUsers:t})}))}},{key:"handleChange",value:function(e){var t=e.target.value;if(t){var s=[];this.state.users.map((function(e){e.username.toLowerCase().includes(t.toLowerCase())&&s.push(e)})),this.setState({searchUsers:s})}else this.setState({searchUsers:this.state.users})}},{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{className:"container",children:[this.state.error?Object(k.jsxs)("div",{className:"alert alert-danger pb-3",id:"profile-msg",role:"alert",children:[this.state.error,Object(k.jsx)("i",{className:"bi bi-x",id:"delete-profile-msg",onClick:function(){e.setState({error:null})}})]}):null,Object(k.jsxs)("div",{className:"profile-wrapper",children:[Object(k.jsx)("div",{className:"row border-bottom border-light border-2",align:"left",children:Object(k.jsx)("legend",{className:"display-6",children:"Users"})}),Object(k.jsx)("div",{className:"pt-2 pb-2",style:{padding:"20px"},children:Object(k.jsx)("form",{className:"row",children:Object(k.jsx)("input",{className:"form-control",type:"text",onChange:this.handleChange,placeholder:"Search for user"})})}),Object(k.jsx)("div",{className:"pt-4",children:this.state.searchUsers.map((function(t){return Object(k.jsx)("div",{className:"roomDiv",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-3",children:Object(k.jsx)("img",{src:t.profile,className:"rounded-circle",alt:"profile",width:"60",height:"60"})}),Object(k.jsx)("div",{className:"col-6 pt-3",children:Object(k.jsx)("a",{href:"/users/".concat(t.id),children:Object(k.jsx)("legend",{className:"display-6 text-dark",children:t.username})})}),Object(k.jsx)("div",{className:"col-1 pt-2 pl-4",children:Object(k.jsx)("span",{className:"bi bi-plus add-mem",onClick:function(){return e.fetchAddUser(t)}})})]})})}))})]})]})}}]),s}(a.Component),J=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={members:[],roomName:null,success:null,admin:null,isAdmin:!1},a.roomId=a.props.match.params.roomId,a.fetchMembers=a.fetchMembers.bind(Object(b.a)(a)),a.fetchDeleteMember=a.fetchDeleteMember.bind(Object(b.a)(a)),a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){y()?this.fetchMembers():window.location.replace("/login")}},{key:"fetchMembers",value:function(){var e=this,t=u+this.roomId+"/members";fetch(t).then((function(e){return e.json()})).then((function(t){e.setState({members:t.members,roomName:t.roomName,admin:t.admin,isAdmin:t.isAdmin})}))}},{key:"fetchDeleteMember",value:function(e){var t=this,s=u+this.roomId+"/remove-user",a={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":O("csrftoken")},body:JSON.stringify({member:e})};fetch(s,a).then((function(e){e.ok&&(t.setState({success:"Member removed successfully..."}),t.fetchMembers())}))}},{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{className:"container",children:[this.state.success?Object(k.jsxs)("div",{className:"alert alert-success pb-3",id:"profile-msg",role:"alert",children:[this.state.success,Object(k.jsx)("i",{className:"bi bi-x",id:"delete-profile-msg",onClick:function(){e.setState({success:null})}})]}):null,Object(k.jsxs)("div",{className:"profile-wrapper",children:[Object(k.jsx)("div",{className:"row border-bottom border-2 border-light",children:Object(k.jsxs)("legend",{className:"display-6 pb-3",children:[this.state.roomName," Members"]})}),Object(k.jsx)("div",{className:"container pt-2",children:this.state.members.map((function(t){return Object(k.jsxs)("div",{className:"roomDiv row",children:[Object(k.jsx)("div",{className:"col-3",children:Object(k.jsx)("img",{src:t.profile,className:"rounded-circle",alt:"profile",width:"60",height:"60"})}),Object(k.jsx)("div",{className:"col-6 pt-3",children:Object(k.jsx)("a",{href:"/users/".concat(t.id),children:Object(k.jsx)("legend",{className:"display-6 text-dark",children:t.username})})}),Object(k.jsx)("div",{className:"col-1 pt-2 pl-4",children:t.id!==e.state.admin.id?e.state.isAdmin?Object(k.jsx)("span",{className:"bi bi-person-dash add-mem",onClick:function(){e.fetchDeleteMember(t)}}):null:Object(k.jsx)("span",{className:"bi bi-star-fill",style:{color:"yellow",fontSize:"24px"}})})]})}))})]})]})}}]),s}(n.a.Component),X=function(e){return Object(k.jsxs)("div",{children:[Object(k.jsx)(D,{authenticated:e}),Object(k.jsx)(m.a,{exact:!0,path:"/",component:C}),Object(k.jsx)(m.a,{exact:!0,path:"/login",component:w}),Object(k.jsx)(m.a,{exact:!0,path:"/signup",component:I}),Object(k.jsx)(m.a,{exact:!0,path:"/users/:userId",component:M}),Object(k.jsx)(m.a,{exact:!0,path:"/rooms/create",component:R}),Object(k.jsx)(m.a,{exact:!0,path:"/room/:roomId",component:_}),Object(k.jsx)(m.a,{exact:!0,path:"/room/:roomId/add-user",component:z}),Object(k.jsx)(m.a,{exact:!0,path:"/room/:roomId/members",component:J})]})},q=s(28),W=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={authenticated:null},a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){(function(){var e=localStorage.getItem("token");e&&x.a.get(j+"isAuthenticated").then((function(t){var s=t.data.token;e===s&&t.data.authenticated||g()}))})(),this.setState({authenticated:y()})}},{key:"render",value:function(){return Object(k.jsx)("div",{children:null!==this.state.authenticated?Object(k.jsx)(q.a,{children:Object(k.jsx)(X,{authenticated:this.state.authenticated})}):Object(k.jsx)("span",{children:"LOADING..."})})}}]),s}(a.Component),G=document.getElementById("root");i.a.render(Object(k.jsx)(W,{}),G)}},[[124,1,2]]]);
//# sourceMappingURL=main.01abccc9.chunk.js.map