{"version":3,"sources":["settings.js","utility.js","auth/auth.js","components/Login.js","components/Home.js","components/Register.js","components/VisitProfile.js","components/Navbar.js","components/CreateRoom.js","components/Chat.js","components/Feed.js","components/Room.js","components/Users.js","components/Members.js","components/Router.js","components/App.js","index.js"],"names":["AUTH_ENDPOINT","ROOMS_ENDPOINT","POSTS_ENDPOINT","getCookie","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","getTime","time","slice","logout","localStorage","removeItem","axios","get","window","location","replace","frontEndLogin","token","id","user","setItem","checkToken","getItem","Login","props","state","username","password","error","handleFormSubmit","bind","handleFormChange","e","preventDefault","requestOptions","method","headers","body","JSON","stringify","this","fetch","then","response","json","data","setState","history","push","catch","console","log","icon","getElementById","input","type","className","event","value","target","role","onClick","onSubmit","onChange","placeholder","toggle","href","Component","Home","align","withRouter","Register","email","password1","password2","validateFormSubmit","errorMessage","includes","isNaN","validator","res","VisitProfile","profile","isCurrentUser","editing","message","confirming","newImage","roomsJoined","showRooms","handleSettingsButtonClick","fetchProfile","renderSettings","fetchUpdate","handleImageSubmit","renderPopupConfirmation","FormData","append","content","match","params","userId","userRooms","src","image","alt","width","height","encType","files","required","bio","style","color","padding","handleDeleteAccountClick","fontSize","map","room","Navbar","data-bs-toggle","data-bs-target","aria-controls","aria-expanded","aria-label","authenticated","aria-labelledby","CreateRoom","roomName","maxMembers","description","fetchCreateRoom","min","max","maxlength","Chat","messages","sendMessage","loadMessages","fetchCreateMessage","renderSentMessage","renderReceivedMessage","scrollDiv","socket","io","withCredentials","emit","on","sender","msg","sender_id","created_at","innerHTML","url","roomId","a","div","scrollTop","scrollHeight","roomID","MESSAGES_ENDPOINT","Date","toLocaleTimeString","admin","paddingLeft","parseInt","Feed","posts","caption","showForm","renderPost","fetchDeletePost","fetchPosts","like","unlike","creator","post","postId","ok","splice","indexOf","msgCallback","creator_id","creator_profile","currentUser","float","ul","liked","paddingTop","likes","Room","isAdmin","members","showChat","feedElement","React","createRef","fetchRoom","fetchUpdateRoom","handleDeleteRoomClick","fetchLeaveRoom","setMessageCallback","max_members","current","marginLeft","ref","Users","users","searchUsers","searchTerm","fetchAddUser","fetchUsers","handleChange","results","toLowerCase","Members","success","fetchMembers","fetchDeleteMember","member","BaseRouter","exact","path","component","App","realToken","checkValidUser","app","ReactDOM","render"],"mappings":"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","file":"static/js/main.01abccc9.chunk.js","sourcesContent":["export const AUTH_ENDPOINT = \"https://z-ch-at.herokuapp.com/api/users/\";\r\nexport const ROOMS_ENDPOINT = \"https://z-ch-at.herokuapp.com/api/rooms/\";\r\nexport const MESSAGES_ENDPOINT = \"https://z-ch-at.herokuapp.com/api/messages/\";\r\nexport const POSTS_ENDPOINT = \"https://z-ch-at.herokuapp.com/api/posts/\";\r\nexport const SERVER_ENDPOINT = \"https://zchatserver.herokuapp.com/\";","export const getCookie = (name) => {\r\n\tlet cookieValue = null;\r\n\tif (document.cookie && document.cookie !== '') {\r\n\t\tconst cookies = document.cookie.split(';');\r\n\t\tfor (let i = 0; i < cookies.length; i++) {\r\n\t\t\tconst cookie = cookies[i].trim();\r\n\t\t\tif (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n\t\t\t\tcookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn cookieValue;\r\n};\r\n\r\nexport const getTime = (time)=>{\r\n\treturn time.slice(11, 16);\r\n};\r\n","import axios from 'axios';\r\nimport {AUTH_ENDPOINT} from '../settings';\r\n\r\nexport const logout = () => {\r\n  localStorage.removeItem(\"token\");\r\n  localStorage.removeItem(\"id\");\r\n  localStorage.removeItem(\"user\");\r\n  axios.get(AUTH_ENDPOINT + \"logout\");\r\n  window.location.replace('/login');\r\n}\r\n\r\nexport const frontEndLogin = (token, id, user) => {\r\n  localStorage.setItem(\"token\", token);\r\n  localStorage.setItem(\"id\", id);\r\n  localStorage.setItem(\"user\", user);\r\n};\r\n\r\nexport const authSuccess = (token) => {\r\n  return {\r\n    type: \"AUTH_SUCCESS\",\r\n    token: token\r\n  }\r\n};\r\n\r\nexport const authCheckState = () => {\r\n  return () => {\r\n    const token = localStorage.getItem('token');\r\n    if (token){\r\n      axios.get(AUTH_ENDPOINT + \"isAuthenticated\")\r\n      .then(res => {\r\n        const realToken = res.data.token;\r\n        if(token === realToken && res.data.authenticated){\r\n          authSuccess(token)\r\n        } else {\r\n          logout()\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const checkToken = () => {\r\n  if(localStorage.getItem('token')){\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n","import React, { Component } from 'react';\r\nimport {AUTH_ENDPOINT} from '../settings';\r\nimport { getCookie } from '../utility';\r\nimport {frontEndLogin} from '../auth/auth';\r\nimport './main.css';\r\n\r\nclass Login extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      username: '',\r\n      password: '',\r\n      error   : null,\r\n    };\r\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\r\n    this.handleFormChange = this.handleFormChange.bind(this);\r\n  }\r\n  \r\n  handleFormSubmit(e){\r\n    e.preventDefault();\r\n    const url = AUTH_ENDPOINT + \"login\";\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"X-CSRFToken\": getCookie(\"csrftoken\"),\r\n      },\r\n      body: JSON.stringify({\r\n        username: this.state.username,\r\n        password: this.state.password,\r\n      })\r\n    };\r\n    fetch(url, requestOptions).then(response => response.json())\r\n    .then(data => {\r\n      if(data.error){\r\n        this.setState({\r\n          error: data.error,\r\n        })\r\n      }\r\n      if(data.token){\r\n        frontEndLogin(data.token, data.id, data.username);\r\n        this.props.history.push('/');\r\n      }\r\n    })\r\n    .catch(error => {\r\n      console.log(error);\r\n    })\r\n  };\r\n\r\n  toggle(){\r\n    var icon = document.getElementById(\"field-icon\");\r\n    var input = document.getElementById('password');\r\n    if (input.type === \"text\"){\r\n      input.type = \"password\";\r\n      icon.className = \"bi bi-eye-slash\";\r\n    } else {\r\n      input.type = \"text\";\r\n      icon.className = \"bi bi-eye\";\r\n    }\r\n  }\r\n\r\n  handleFormChange(event){\r\n    const value = event.target.value;\r\n    const name = event.target.name;\r\n    this.setState({\r\n      [name]: value,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <div className=\"container\">\r\n        {\r\n          this.state.error ? \r\n            <div className=\"alert alert-danger\" id=\"login-error\" role=\"alert\">\r\n              {this.state.error}\r\n              <span className=\"bi bi-x\" id=\"delete-login-error\" onClick={()=>{\r\n                this.setState({error: null})\r\n              }} />\r\n            </div>\r\n          : null\r\n        }\r\n        <div className=\"login-div\">\r\n          <legend className=\"header\">\r\n            Welcome back\r\n          </legend>\r\n          <form onSubmit={this.handleFormSubmit} className=\"login-form form-group\">\r\n            <div className=\"pt-3 pb-3\">\r\n              <input\r\n                type=\"text\"\r\n                name=\"username\"\r\n                className=\"entry\"\r\n                value={this.state.username}\r\n                onChange={this.handleFormChange}\r\n                placeholder=\"Username\"\r\n              />\r\n            </div>\r\n            <div className=\"pt-3 pb-3\">\r\n              <input\r\n                type=\"password\"\r\n                name=\"password\"\r\n                className=\"entry\"\r\n                value={this.state.password}\r\n                onChange={this.handleFormChange}\r\n                placeholder=\"Password\"\r\n                id=\"password\"\r\n              />\r\n              <span className=\"bi bi-eye-slash\" id=\"field-icon\" onClick={this.toggle.bind(this)}></span>\r\n            </div>\r\n            <div className=\"button\">\r\n              <div className=\"row pt-4\">\r\n                <button type=\"submit\" className=\"btn btn-danger pt-2 pb-2\">Login</button>\r\n              </div>\r\n            </div>\r\n            <div className=\"pt-4\">\r\n              <a href=\"/signup\" className=\"link\">Don't have an account yet ?</a>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Login;\r\n","import React, { Component } from 'react';\r\nimport { checkToken } from '../auth/auth';\r\nimport { withRouter } from 'react-router-dom';\r\nimport './main.css';\r\n\r\n\r\nclass Home extends Component {\r\n  componentDidMount() {\r\n    if(!checkToken()){\r\n      window.location.replace('/login');\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <div>\r\n        <h1 className=\"display-5\" align=\"center\">Home</h1>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Home);","import React, { Component } from 'react';\r\nimport { AUTH_ENDPOINT } from '../settings';\r\nimport { getCookie } from '../utility';\r\nimport {frontEndLogin} from '../auth/auth';\r\nimport './main.css';\r\n\r\nclass Register extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      username : '',\r\n      email    : '',\r\n      password1: '',\r\n      password2: '',\r\n      error    : null,\r\n    };\r\n    this.validateFormSubmit = this.validateFormSubmit.bind(this);\r\n  }\r\n  validateFormSubmit(){\r\n    var errorMessage = 'valid';\r\n    if(this.state.password1 !== this.state.password2){\r\n      errorMessage = \"Passwords does not match ...\";\r\n    }\r\n    else if(this.state.password1.length < 8){\r\n      errorMessage = \"Password must not be less than 8 characters..\";\r\n    }\r\n    else if(this.state.password1.includes(this.state.username)){\r\n      errorMessage = \"password cannot contain personal information..\";\r\n    }\r\n    else if(!isNaN(this.state.password1)){\r\n      errorMessage = \"Password cannot be entirely numeric..\";\r\n    }\r\n    return errorMessage;\r\n  }\r\n\r\n  handleFormSubmit(e){\r\n    e.preventDefault();\r\n    const validator = this.validateFormSubmit();\r\n\r\n    if(validator === \"valid\"){\r\n      const url = AUTH_ENDPOINT + \"create\";\r\n      const requestOptions = {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"X-CSRFToken\": getCookie(\"csrftoken\"),\r\n        },\r\n        body: JSON.stringify({\r\n          username: this.state.username,\r\n          email: this.state.email,\r\n          password: this.state.password1,\r\n        })\r\n      };\r\n\r\n      fetch(url, requestOptions).then(res => res.json()).then(data =>{\r\n        if(data.error){\r\n          this.setState({\r\n            error: data.error\r\n          })\r\n        }\r\n        if(data.token){\r\n          frontEndLogin(data.token, data.id, data.username);\r\n          this.props.history.push(\"/\");\r\n        }\r\n      })\r\n\r\n    } else {\r\n      this.setState({\r\n        error: validator,\r\n      });\r\n    }\r\n  }\r\n\r\n  handleFormChange(e){\r\n    const value = e.target.value;\r\n    const name  = e.target.name;\r\n    this.setState({\r\n      [name]: value,\r\n    })\r\n  }\r\n\r\n  toggle(){\r\n    var icon = document.getElementById(\"field-icon\");\r\n    var input = document.getElementById('password');\r\n    if (input.type === \"text\"){\r\n      input.type = \"password\";\r\n      icon.className = \"bi bi-eye-slash\";\r\n    } else {\r\n      input.type = \"text\";\r\n      icon.className = \"bi bi-eye\";\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <div className=\"container\">\r\n        {\r\n          this.state.error ? \r\n            <div className=\"alert alert-danger\" id=\"login-error\" role=\"alert\">\r\n              {this.state.error}\r\n              <span className=\"bi bi-x\" id=\"delete-register-error\" onClick={()=>{\r\n                this.setState({error: null})\r\n              }} />\r\n            </div>\r\n          : null\r\n        }\r\n        <div className=\"login-div\">\r\n          <legend className=\"header\">\r\n            Join Now !\r\n          </legend>\r\n          <form onSubmit={this.handleFormSubmit.bind(this)} className=\"login-form form-group\">\r\n            <div className=\"pt-3 pb-3\">\r\n              <input\r\n                type=\"text\"\r\n                name=\"username\"\r\n                className=\"entry\"\r\n                value={this.state.username}\r\n                onChange={this.handleFormChange.bind(this)}\r\n                placeholder=\"Username\"\r\n              />\r\n            </div>\r\n            <div className=\"pt-3 pb-3\">\r\n              <input\r\n                type=\"email\"\r\n                name=\"email\"\r\n                className=\"entry\"\r\n                value={this.state.email}\r\n                onChange={this.handleFormChange.bind(this)}\r\n                placeholder=\"username@email.com\"\r\n              />\r\n            </div>\r\n            <div className=\"pt-3 pb-3\">\r\n              <input\r\n                type=\"password\"\r\n                name=\"password1\"\r\n                className=\"entry\"\r\n                value={this.state.password1}\r\n                onChange={this.handleFormChange.bind(this)}\r\n                placeholder=\"Password\"\r\n                id=\"password\"\r\n              />\r\n              <span className=\"bi bi-eye-slash\" id=\"field-icon\" onClick={this.toggle.bind(this)}></span>\r\n            </div>\r\n            <div className=\"pt-3 pb-3\">\r\n              <input\r\n                type=\"password\"\r\n                name=\"password2\"\r\n                className=\"entry\"\r\n                value={this.state.password2}\r\n                onChange={this.handleFormChange.bind(this)}\r\n                placeholder=\"Confirm password\"\r\n              />\r\n            </div>\r\n            <div className=\"button\">\r\n              <div className=\"row pt-4\">\r\n                <button type=\"submit\" className=\"btn btn-danger pt-2 pb-2\">Create</button>\r\n              </div>\r\n            </div>\r\n            <div className=\"pt-4\">\r\n              <a href=\"/login\" className=\"link\">Already have an account ?</a>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Register;","import React, { Component } from 'react';\r\nimport {AUTH_ENDPOINT} from '../settings';\r\nimport { checkToken } from '../auth/auth';\r\nimport { getCookie } from '../utility';\r\nimport './main.css';\r\n\r\n\r\nclass VisitProfile extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      user          : {},\r\n      profile       : {},\r\n      isCurrentUser : false,\r\n      editing       : false, \r\n      message       : {},\r\n      confirming    : false,\r\n      newImage      : null,\r\n      roomsJoined   : [],\r\n      showRooms     : true,\r\n    };\r\n    this.handleSettingsButtonClick = this.handleSettingsButtonClick.bind(this);\r\n    this.fetchProfile = this.fetchProfile.bind(this);\r\n    this.renderSettings = this.renderSettings.bind(this);\r\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\r\n    this.fetchUpdate = this.fetchUpdate.bind(this);\r\n    this.handleImageSubmit = this.handleImageSubmit.bind(this);\r\n    this.renderPopupConfirmation = this.renderPopupConfirmation.bind(this);\r\n  }\r\n\r\n  componentDidMount(){\r\n    if(checkToken()){\r\n      this.fetchProfile(false);\r\n    } else {\r\n      this.props.history.push(\"/\");\r\n    }\r\n  }\r\n\r\n  handleImageSubmit(event){\r\n    event.preventDefault();\r\n    const data = new FormData();\r\n    data.append(\"image\", this.state.newImage);\r\n    const headers = {};\r\n    this.fetchUpdate(data, headers);\r\n  }\r\n\r\n  handleFormSubmit(e){\r\n    e.preventDefault();\r\n    const data = JSON.stringify({\r\n      user: this.state.user,\r\n      profile: this.state.profile,\r\n    });\r\n    const headers = {\r\n      \"Content-Type\": \"application/json\",\r\n    };\r\n    this.fetchUpdate(data, headers);\r\n  }\r\n\r\n  fetchUpdate(data, headers){\r\n    headers['X-CSRFToken'] = getCookie(\"csrftoken\");\r\n    const url = AUTH_ENDPOINT + \"update\";\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n      headers: headers,\r\n      body: data\r\n    };\r\n    fetch(url, requestOptions).then(response => {\r\n      return response.json();\r\n    })\r\n    .then(data => {\r\n      if(data.error){\r\n        this.setState({\r\n          message: {\r\n            type: \"danger\",\r\n            content: data.error,\r\n          }\r\n        })\r\n        this.fetchProfile(true);\r\n\r\n      } else if(data.user.id){\r\n        this.setState({\r\n          editing: false,\r\n          message: {\r\n            type: \"success\",\r\n            content: \"Successfully updated !\",\r\n          }\r\n        });\r\n        this.fetchProfile(false);\r\n      }\r\n    });\r\n  }\r\n\r\n  fetchProfile(editing){\r\n    const id = this.props.match.params.userId;\r\n    const url = AUTH_ENDPOINT + id;\r\n    fetch(url).then(response => response.json()).then(data => {\r\n      this.setState({\r\n        user         : data.user,\r\n        profile      : data.profile,\r\n        isCurrentUser: data.isCurrentUser,\r\n        editing      : editing,\r\n        roomsJoined  : data.userRooms\r\n      })\r\n    });\r\n  }\r\n\r\n  handleDeleteAccountClick(){\r\n    const url = AUTH_ENDPOINT+ \"delete\";\r\n    const requestOptions= {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"X-CSRFToken\": getCookie(\"csrftoken\")\r\n      },\r\n      body: JSON.stringify({\r\n        token: localStorage.getItem(\"token\")\r\n      })\r\n    };\r\n    fetch(url, requestOptions).then(res => res.json()).then(data=> {\r\n      if (data.error){\r\n        this.setState({\r\n          message: {\r\n            type: \"danger\",\r\n            content: data.error,\r\n          }\r\n        })\r\n      } else {\r\n        localStorage.removeItem(\"token\");\r\n        localStorage.removeItem(\"id\");\r\n        localStorage.removeItem(\"user\");\r\n        window.location.replace(\"/\");\r\n      }\r\n    });\r\n  }\r\n\r\n  handleSettingsButtonClick(){\r\n    this.setState({\r\n      editing: true,\r\n    })\r\n  }\r\n  \r\n  renderSettings(){\r\n    return(\r\n      <div className=\"container mt-2\">\r\n        {this.state.confirming ? this.renderPopupConfirmation(): null}\r\n        <div className=\"profile-wrapper\">\r\n          <div className=\"row pb-3 border-bottom border-2\">\r\n            <div align=\"center\">\r\n              <img src={this.state.profile.image} alt=\"profile\" className=\"rounded-circle\" width=\"150\" height=\"150\" />    \r\n            </div>\r\n            <form encType=\"multipart/form-data\" onSubmit={this.handleImageSubmit}>\r\n              <div className=\"row\">\r\n                <div className=\"pb-3 pt-3 col-8\">\r\n                  <label className=\"label\">\r\n                    Profile Image*\r\n                  </label>\r\n                  <input type=\"file\" onChange={(e)=>{this.setState({\r\n                    newImage: e.target.files[0],\r\n                  })}}/>\r\n                </div>\r\n                <div className=\"col-5 pb-1 pt-4\">\r\n                  <button type=\"submit\" className=\"btn btn-success\">\r\n                    Update Image\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n          <div className=\"mt-3\">\r\n            <form onSubmit={this.handleFormSubmit}>\r\n              <div className=\"pt-3 pb-3\">\r\n                <label className=\"label\">\r\n                  Username*\r\n                </label>\r\n                <input \r\n                  type=\"text\"\r\n                  required\r\n                  className=\"form-control\" \r\n                  value={this.state.user.username}\r\n                  placeholder=\"Username\"\r\n                  onChange={(e)=>{\r\n                    this.setState({\r\n                      user: {\r\n                        ...this.state.user,\r\n                        username: e.target.value,\r\n                      }\r\n                    })\r\n                  }}\r\n                  name=\"userName\"\r\n                />\r\n                <span>Username cannot contain symbols..</span>\r\n              </div>\r\n              <div className=\"pt-3 pb-3\">\r\n                <label className=\"label\">\r\n                  Email*\r\n                </label>\r\n                <input \r\n                  type=\"email\"\r\n                  required\r\n                  className=\"form-control\" \r\n                  value={this.state.user.email}\r\n                  placeholder=\"Email\"\r\n                  onChange={(e)=>{\r\n                    this.setState({\r\n                      user: {\r\n                        ...this.state.user,\r\n                        email: e.target.value,\r\n                      }\r\n                    })\r\n                  }}\r\n                  name=\"email\"\r\n                />\r\n              </div>\r\n              <div className=\"pt-3 pb-3\">\r\n                <label className=\"label\">\r\n                  Bio*\r\n                </label>\r\n                <textarea \r\n                  type=\"text\"\r\n                  className=\"form-control\" \r\n                  value={this.state.profile.bio}\r\n                  placeholder=\"Bio\"\r\n                  onChange={(e)=>{\r\n                    this.setState({\r\n                      profile: {\r\n                        ...this.state.profile,\r\n                        bio: e.target.value,\r\n                      }\r\n                    })\r\n                  }}\r\n                  name=\"bio\"\r\n                  height=\"120\"\r\n                />\r\n              </div>\r\n              <div align=\"center\">\r\n                <div className=\"row mt-3 mb-5\">\r\n                  <div className=\"col-6\">\r\n                    <button className=\"btn btn-danger\" onClick={()=>{this.setState({editing: false, confirming: false})}}>\r\n                      Back\r\n                    </button>\r\n                  </div>\r\n                  <div className=\"col-6\">\r\n                    <button className=\"btn btn-success\" type=\"submit\">\r\n                      Update\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n          <div className=\"row pt-3 border-top border-light border-2\">\r\n            <button type=\"submit\" className=\"btn btn-danger\" onClick={()=>{\r\n              this.setState({confirming: true});\r\n              }}>\r\n              Delete Account <span className=\"bi bi-trash-fill\" style={{color: 'white', padding: '10px'}}/>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>  \r\n    );\r\n  }\r\n  \r\n  renderPopupConfirmation(){\r\n    return(\r\n      <div className=\"popup\">\r\n        <div className=\"row border-bottom border-2 pb-4\">\r\n          <div className=\"col-10\">\r\n            <legend className=\"display-6\">\r\n              Confirm Delete Account\r\n            </legend>\r\n          </div>\r\n          <div className=\"col-1\">\r\n            <span className=\"bi bi-x icon\" onClick={()=>this.setState({confirming: false})} />\r\n          </div>\r\n        </div>\r\n        <div className=\"pt-4\">\r\n          <p>\r\n            Are you sure to delete your account?<br />\r\n            You will lose all activities <br />\r\n          </p>\r\n        </div>\r\n        <div className=\"row pt-3\">\r\n          <button className=\"btn btn-danger\" onClick={this.handleDeleteAccountClick} >\r\n            Delete Account\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <div className=\"container pt-4\">\r\n        {\r\n          this.state.message.content ? \r\n            <div className={`alert alert-${this.state.message.type}`} id=\"profile-msg\" role=\"alert\">\r\n              {this.state.message.content}\r\n              <i className=\"bi bi-x\" id=\"delete-profile-msg\" onClick={()=>{this.setState({message: {}})}}/>\r\n            </div>\r\n          : null\r\n        }\r\n        {this.state.editing ? this.renderSettings() : \r\n          <div className=\"profile-wrapper\">\r\n            <div className=\"row pb-3\">\r\n              <div className=\"col-4\">\r\n                <img src={this.state.profile.image} alt=\"profile\" className=\"rounded-circle\" width=\"150\" height=\"150\"/>\r\n              </div>\r\n              <div className=\"col-6\">\r\n                <h6 className=\"display-6 border-bottom border-2 border-light ml-4\" style={{padding: 25}}>\r\n                  {this.state.user.username}\r\n                </h6>\r\n              </div>\r\n              {this.state.isCurrentUser ? \r\n                <div className=\"col-2\">\r\n                  <span className=\"bi bi-gear\" id=\"settings-button\" onClick={this.handleSettingsButtonClick}/>\r\n                </div>\r\n              : null}\r\n            </div>\r\n            <div style={{width:300}} className=\"mt-4 pb-3\">\r\n              <p>\r\n                {this.state.profile.bio}\r\n              </p>\r\n            </div>\r\n            <div className=\"border-top border-2 pt-3\">\r\n              <div className=\"row\">\r\n                <div className=\"col-8\">\r\n                  <label className=\"ml-4 pb-2\" style={{fontSize: \"25px\"}}>\r\n                    Rooms Joined:  <span className=\"bi bi-caret-down-fill\" style={{fontSize: \"20px\"}} id=\"toggleRooms\" onClick={()=>{\r\n                      if(document.getElementById(\"toggleRooms\").className === \"bi bi-caret-right-fill\"){\r\n                        document.getElementById(\"toggleRooms\").className = \"bi bi-caret-down-fill\";\r\n                      } else {\r\n                        document.getElementById(\"toggleRooms\").className = \"bi bi-caret-right-fill\";\r\n                      }\r\n                      this.setState({\r\n                        showRooms: !this.state.showRooms\r\n                      })\r\n                    }} />  \r\n                  </label>\r\n                </div>\r\n                  {this.state.isCurrentUser ?\r\n                    <div className=\"col-3\">\r\n                      <span className=\"bi bi-plus-square\" id=\"add-room-button\" onClick={()=>{\r\n                        this.props.history.push(\"/rooms/create\");\r\n                      }} />\r\n                    </div>\r\n                    : null\r\n                  }\r\n              </div>\r\n              {\r\n                this.state.showRooms ? \r\n                  <div className=\"container ml-4 mr-4 pt-4\">\r\n                    {\r\n                      this.state.roomsJoined.map((room)=>{\r\n                        return(\r\n                          <div className=\"row roomDiv\">\r\n                            <div className=\"col-8\">\r\n                              <a href={`/room/${room.id}/`}><legend className=\"display-6\">{room.name}</legend></a>\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      })\r\n                    }\r\n                  </div> \r\n                : null\r\n              }\r\n            </div>\r\n          </div>}\r\n      </div>      \r\n    );\r\n  }\r\n}\r\n\r\nexport default VisitProfile;","import React, { Component } from 'react';\r\nimport {logout } from '../auth/auth';\r\nimport './main.css';\r\n\r\n\r\nclass Navbar extends Component {\r\n  render() {\r\n    return(\r\n      <nav className=\"navbar navbar-expand-lg navbar-light bg-light pt-3 pb-3\">\r\n      <div className=\"container-fluid\">\r\n        <a className=\"navbar-brand\" href=\"/\">Z-Chat</a>\r\n        <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNavDropdown\" aria-controls=\"navbarNavDropdown\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n          <span className=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n        <div className=\"collapse navbar-collapse\" id=\"navbarNavDropdown\">\r\n          {this.props.authenticated ? \r\n            <ul className=\"navbar-nav\">\r\n              <li className=\"nav-item dropdown\">\r\n                <a className=\"nav-link dropdown-toggle\" href=\"\" id=\"navbarDropdownMenuLink\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                  Account\r\n                </a>\r\n                <ul className=\"dropdown-menu\" aria-labelledby=\"navbarDropdownMenuLink\">\r\n                  <li><a className=\"dropdown-item\" href={\"/users/\" + localStorage.getItem(\"id\")}>Profile</a></li>\r\n                  <li><span className=\"dropdown-item\" onClick={logout}>logout</span></li>\r\n                </ul>\r\n              </li>\r\n            </ul>\r\n            :\r\n            <ul className=\"navbar-nav\">\r\n              <li className=\"nav-item\">\r\n                <a href=\"/login\" className=\"nav-link\">Login</a>\r\n              </li>\r\n              <li className=\"nav-item\">\r\n                <a href=\"/signup\" className=\"nav-link\">Signup</a>\r\n              </li>\r\n            </ul>\r\n          }\r\n        </div>\r\n      </div>\r\n    </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Navbar;","import React, { Component } from 'react';\r\nimport  {ROOMS_ENDPOINT} from '../settings';\r\nimport {getCookie} from '../utility';\r\nimport { checkToken } from '../auth/auth';\r\nimport './main.css';\r\n\r\nclass CreateRoom extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      roomName   : '',\r\n      maxMembers : '',\r\n      description: '',\r\n      error      : null,\r\n    };\r\n    this.fetchCreateRoom = this.fetchCreateRoom.bind(this);\r\n    this.handleFormChange= this.handleFormChange.bind(this);\r\n  }\r\n  componentDidMount() {\r\n    if(!checkToken()){\r\n      this.props.history.push(\"/login\");\r\n    }\r\n  }\r\n\r\n  fetchCreateRoom(){\r\n    const url = ROOMS_ENDPOINT + \"create\";\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"X-CSRFToken\": getCookie(\"csrftoken\")\r\n      },\r\n      body: JSON.stringify({\r\n        roomName: this.state.roomName,\r\n        maxMembers: this.state.maxMembers,\r\n        description: this.state.description,\r\n      })\r\n    };\r\n    fetch(url, requestOptions).then(response => response.json()).then(data=>{\r\n      console.log(data);\r\n      if(data.error){\r\n        this.setState({\r\n          error: data.error,\r\n        });\r\n      } else {\r\n        window.location.replace('/room/' + data.id);\r\n      }\r\n    })\r\n  }\r\n\r\n  handleFormSubmit(event){\r\n    event.preventDefault();\r\n    this.fetchCreateRoom();\r\n  }\r\n  \r\n  handleFormChange(event){\r\n    this.setState({\r\n      [event.target.name]: event.target.value,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <div className=\"container pt-5\">\r\n        <div>\r\n          <legend className=\"display-6\" align=\"center\">\r\n            Create New Room\r\n          </legend>\r\n          <form onSubmit={this.handleFormSubmit.bind(this)} className=\"login-form form-group\">\r\n            <div className=\"pt-3 pb-3\">\r\n              <input\r\n                type=\"text\"\r\n                name=\"roomName\"\r\n                className=\"entry\"\r\n                value={this.state.roomName}\r\n                placeholder=\"Room Name\"\r\n                onChange={this.handleFormChange}\r\n              />\r\n            </div>\r\n            <div className=\"pt-3 pb-3\">\r\n              <input\r\n                type=\"number\"\r\n                name=\"maxMembers\"\r\n                className=\"entry\"\r\n                value={this.state.maxMembers}\r\n                placeholder=\"Room max members number\"\r\n                min=\"1\"\r\n                max=\"25\"\r\n                onChange={this.handleFormChange}\r\n              />\r\n            </div>\r\n            <div className=\"pt-3 pb-3\">\r\n              <textarea\r\n                type=\"text\"\r\n                name=\"description\"\r\n                className=\"entry\"\r\n                maxlength=\"40\"\r\n                value={this.state.description}\r\n                placeholder=\"description (in 40 characters)\"\r\n                onChange={this.handleFormChange}\r\n              />\r\n            </div>\r\n            <div className=\"button\">\r\n              <div className=\"row pt-4\">\r\n                <button type=\"submit\" className=\"btn btn-danger pt-2 pb-2\">Create</button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CreateRoom;","import React, { Component } from 'react';\r\nimport io from \"socket.io-client\";\r\nimport {SERVER_ENDPOINT, ROOMS_ENDPOINT, MESSAGES_ENDPOINT} from '../settings';\r\nimport {getTime , getCookie} from '../utility';\r\nimport './main.css';\r\n\r\n\r\nclass Chat extends Component {\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tmessage: null,\r\n\t\t\tmessages: [],\r\n\t\t};\r\n\r\n\t\tthis.sendMessage  = this.sendMessage.bind(this);\r\n\t\tthis.loadMessages = this.loadMessages.bind(this);\r\n    this.fetchCreateMessage = this.fetchCreateMessage.bind(this);\r\n    this.renderSentMessage = this.renderSentMessage.bind(this);\r\n    this.renderReceivedMessage = this.renderReceivedMessage.bind(this);\r\n    this.scrollDiv = this.scrollDiv.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n    this.loadMessages();\r\n    \r\n\t\tthis.socket = io(SERVER_ENDPOINT, {\r\n      withCredentials: true,\r\n    });\r\n\r\n    this.socket.emit('join', {\r\n      room: this.props.name\r\n    })\r\n\r\n    this.socket.on('serverMSG', (data)=>{\r\n      if(data.sender){\r\n        var msg = `\r\n          <div class=\"received-message\">\r\n            <div class=\"row\">\r\n              <div class=\"col-1\"></div>\r\n              <div class=\"col-7\">\r\n                <a href={\"/users/${data.sender_id}\"}>\r\n                  <legend class=\"border-bottom\">\r\n                    ${data.sender}\r\n                  </legend>\r\n                </a>\r\n              </div>\r\n              <div class=\"col-2\">\r\n                <small class=\"text-dark\">\r\n                  ${getTime(\"12345678910\"+data.created_at)}\r\n                </small>\r\n              </div>\r\n            </div>\r\n            <div style=\"padding-left: 10px;\">\r\n              <text class=\"text-dark\">\r\n                ${data.content}\r\n              </text>\r\n            </div>\r\n          </div>\r\n        `;\r\n        if(data.sender_id === localStorage.getItem(\"id\")){\r\n          msg = `\r\n            <div class=\"row\">\r\n              <div class=\"col-3\"></div>\r\n              <div class=\"sent-message col-8\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-1\"></div>\r\n                  <div class=\"col-8\">\r\n                    <text class=\"text-dark\">\r\n                      ${data.content}\r\n                    </text>\r\n                  </div>\r\n                  <div class=\"col-2\">\r\n                    <small class=\"text-dark\">\r\n                      ${getTime(\"12345678910\" + data.created_at)}\r\n                    </small>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          `;\r\n        }\r\n        document.getElementById(\"msgs\").innerHTML += msg;\r\n        this.scrollDiv();\r\n      }\r\n    })\r\n\t}\r\n\r\n\tloadMessages(){\r\n\t\tconst url = ROOMS_ENDPOINT + this.props.roomId;\r\n\t\tfetch(url).then(response => response.json()).then(data=>{\r\n\t\t\tthis.setState({\r\n\t\t\t\tmessages: data.messages,\r\n\t\t\t});\r\n      this.scrollDiv();\r\n\t\t})\r\n\t}\r\n\r\n  async scrollDiv(){\r\n    var div = document.getElementById(\"msgWrapper\");\r\n    div.scrollTop = div.scrollHeight;\r\n  }\r\n\r\n  fetchCreateMessage(){\r\n    const url = MESSAGES_ENDPOINT + \"create\";\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"X-CSRFToken\": getCookie(\"csrftoken\"),\r\n      },\r\n      body: JSON.stringify({\r\n        roomID: this.props.roomId,\r\n        message: this.state.message\r\n      })\r\n    };\r\n    fetch(url, requestOptions).then(response => response.json()).then(data=>{\r\n      if(data.message.id){\r\n        this.setState({\r\n          message: ''\r\n        })\r\n      }\r\n    });\r\n  }\r\n\r\n\tsendMessage(e){\r\n\t\te.preventDefault();\r\n\r\n    if(this.state.message){\r\n\r\n      const content = this.state.message;\r\n      const time = new Date().toLocaleTimeString();\r\n\r\n      this.fetchCreateMessage();\r\n\r\n      this.socket.emit('roomMSG', {\r\n        sender: localStorage.getItem(\"user\"),\r\n        sender_id: localStorage.getItem(\"id\"),\r\n        content: content,\r\n        created_at: time,\r\n        room: this.props.name\r\n      });\r\n      \r\n    }\r\n\t}\r\n\r\n  renderSentMessage(message){\r\n    return(\r\n      <div className=\"row\">\r\n        <div className=\"col-3\" />\r\n        <div className=\"sent-message col-8\">\r\n          <div className=\"row\">\r\n            <div className=\"col-1\" />\r\n            <div className=\"col-8\">\r\n              <text style={{color:\"black\"}}>\r\n                {message.content}\r\n              </text>\r\n            </div>\r\n            <div className=\"col-2\">\r\n              <small className=\"text-dark\">\r\n                {getTime(message.created_at)}\r\n              </small>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderReceivedMessage(message){\r\n    return(\r\n      <div className=\"received-message\">\r\n        <div className=\"row\">\r\n          <div className=\"col-1\"/>\r\n          <div className=\"col-7\">\r\n            <a href={`/users/${message.sender_id}`}>\r\n              <legend>\r\n                {message.sender} \r\n                {message.sender_id === this.props.admin ?\r\n                  <small className=\"text-warning\" style={{fontSize:\"13px\"}}>   admin</small>\r\n                  :null\r\n                }\r\n              </legend>\r\n            </a>\r\n          </div>\r\n          <div className=\"col-2\">\r\n            <small className=\"text-dark\">\r\n              {getTime(message.created_at)}\r\n            </small>\r\n          </div>\r\n        </div>\r\n        <div style={{paddingLeft: \"10px\"}}>\r\n          <text>\r\n            {message.content}\r\n          </text>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div className=\"container\">\r\n        <div id=\"msgWrapper\">\r\n          <div className=\"pt-5\" id=\"msgs\">\r\n            {this.state.messages.map((message)=>{\r\n              return(\r\n                message.sender_id !== parseInt(localStorage.getItem(\"id\")) ? \r\n                  this.renderReceivedMessage(message)\r\n                :\r\n                this.renderSentMessage(message)\r\n              )\r\n            })}\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <form onSubmit={this.sendMessage} id=\"msgForm\">\r\n            <div className=\"row\">\r\n              <div className=\"col-9\">\r\n                <input placeholder=\"enter message\" value={this.state.message} type=\"text\" className=\"form-control\" onChange={(e)=>this.setState({message: e.target.value})} />\r\n              </div>\r\n              <div className=\"col-1\"><button type=\"submit\" value=\"submit\" className=\"btn btn-success\">send</button></div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Chat;","import React, { Component } from 'react';\r\nimport { POSTS_ENDPOINT, ROOMS_ENDPOINT } from '../settings';\r\nimport {getCookie} from '../utility';\r\nimport './main.css';\r\n\r\n\r\nclass Feed extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      posts: [],\r\n      caption: \"\",\r\n      image: null,\r\n      showForm: false\r\n    };\r\n\r\n    this.renderPost = this.renderPost.bind(this);\r\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\r\n    this.fetchDeletePost = this.fetchDeletePost.bind(this);\r\n    this.fetchPosts = this.fetchPosts.bind(this);\r\n    this.like = this.like.bind(this);\r\n    this.unlike = this.unlike.bind(this);\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.fetchPosts();\r\n  }\r\n\r\n  fetchPosts() {\r\n    const url = ROOMS_ENDPOINT + this.props.roomId;\r\n\r\n    fetch(url).then(response => response.json()).then(data=>{\r\n      this.setState({\r\n        posts: data.posts\r\n      });\r\n    })\r\n  }\r\n\r\n  handleFormSubmit(e){\r\n    e.preventDefault();\r\n    var data = new FormData();\r\n    const image = this.state.image;\r\n    if (image !== null){\r\n      data.append(\"image\", image);\r\n    }\r\n    data.append(\"caption\", this.state.caption);\r\n    data.append(\"room\", this.props.roomId);\r\n    data.append(\"creator\", localStorage.getItem(\"id\"));\r\n\r\n    const url = POSTS_ENDPOINT + \"create\";\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"X-CSRFToken\": getCookie(\"csrftoken\"),\r\n      },\r\n      body: data\r\n    };\r\n    fetch(url, requestOptions).then(response => response.json()).then(data=>{\r\n      console.log(data);\r\n      if(data.creator){\r\n        this.setState({\r\n          showForm: false,\r\n          caption: \"\"\r\n        })\r\n      }\r\n    })\r\n    this.fetchPosts();\r\n  }\r\n\r\n  fetchDeletePost(post){\r\n    const postId = post.id;\r\n    const url = POSTS_ENDPOINT + postId + \"/delete\";\r\n    fetch(url).then(response => {\r\n      if(response.ok){\r\n        var posts = this.state.posts;\r\n        posts.splice(posts.indexOf(post), 1);\r\n        this.setState({\r\n        posts: posts\r\n        })\r\n        this.props.msgCallback({\r\n          type: \"success\",\r\n          content: \"Post Deleted..\"\r\n        });\r\n      } else {\r\n        this.props.msgCallback({\r\n          type: \"danger\",\r\n          content: \"Something went wrong, try again later..\"\r\n        });\r\n      }\r\n    });\r\n  }\r\n  like(post){\r\n    const url = POSTS_ENDPOINT + post.id + \"/like\";\r\n    fetch(url).then(response => {\r\n      if(response.ok){\r\n        this.fetchPosts();\r\n      }\r\n    })\r\n  }\r\n  \r\n  unlike(post){\r\n    const url = POSTS_ENDPOINT + post.id + \"/unlike\";\r\n    fetch(url).then(response => {\r\n      if(response.ok){\r\n        this.fetchPosts();\r\n      }\r\n    })\r\n  }\r\n\r\n  renderPost(post){\r\n    const ul = (post) => {\r\n      const currentUser = parseInt(localStorage.getItem(\"id\"));\r\n      if(currentUser === post.creator_id){\r\n        return(\r\n          <div className=\"dropdown pt-2\" style={{color: \"white\", float:\"right\"}}>\r\n            <span className=\"dropdown-toggle bi bi-three-dots-vertical\" type=\"button\" id=\"dropdownMenuButton1\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\"/>\r\n            <ul className=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton1\">\r\n              <li><span className=\"dropdown-item\"><span className=\"bi bi-gear\" onClick={null} />  Edit</span></li>\r\n              <li><span className=\"dropdown-item\" onClick={()=>this.fetchDeletePost(post)} ><span className=\"bi bi-trash\"/>  Delete</span></li>\r\n            </ul> \r\n          </div>\r\n        );\r\n      } else if(currentUser === this.props.admin){\r\n        return(\r\n          <div className=\"dropdown pt-2\" style={{color: \"white\", float:\"right\"}}>\r\n            <span className=\"dropdown-toggle bi bi-three-dots-vertical\" type=\"button\" id=\"dropdownMenuButton1\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\"/>\r\n            <ul className=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton1\">\r\n              <li><span className=\"dropdown-item\" onClick={()=>this.fetchDeletePost(post)} ><span className=\"bi bi-trash\"/>  Delete</span></li>\r\n            </ul> \r\n          </div>\r\n        );\r\n      }\r\n      return null;\r\n    };\r\n\r\n    return (\r\n      <div className=\"post\">\r\n        <div className=\"row border-bottom border-light\">\r\n          <div className=\"col-2\">\r\n            <a href={`/users/${post.creator_id}`}>\r\n              <img src={post.creator_profile} alt=\"Profile\" className=\"rounded-circle\" height=\"40\" width=\"40\" />\r\n            </a>\r\n          </div>\r\n          <div className=\"col-8\">\r\n            <legend className=\"text-white pt-1\">{post.creator}</legend>\r\n          </div>\r\n          <div className=\"col-1\">\r\n            {ul(post)}\r\n          </div>\r\n        </div>\r\n        <div className=\"container pt-3\">\r\n          {post.caption}\r\n        </div>\r\n        <div className=\"pt-2 pb-2\">\r\n          {post.image ? <img src={post.image} alt=\"post\" height=\"100%\" width=\"100%\" />:null}\r\n        </div>\r\n        <div style={{paddingLeft: \"20px\"}}>\r\n          <div className=\"row\">\r\n            <div className=\"col-1\">\r\n              { post.liked \r\n                ? <span className=\"bi bi-heart-fill liked\" onClick={()=>this.unlike(post)} />\r\n                : <span className=\"bi bi-heart notliked\" onClick={()=>this.like(post)} />\r\n              }\r\n            </div>\r\n            <div className=\"col-1\" style={{paddingTop: \"6px\"}}>\r\n              <span>\r\n                { post.likes\r\n                  ? post.likes\r\n                  : null\r\n                }\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <div className=\"container pt-3\">\r\n        <form encType=\"multipart/form-data\" onSubmit={this.handleFormSubmit}>\r\n          <textarea \r\n            className=\"postEntry\"\r\n            type=\"text\" \r\n            required \r\n            value={this.state.caption} \r\n            onChange={(e)=>this.setState({\r\n              caption: e.target.value\r\n            })} \r\n            placeholder=\"What's in your mind ? POST!\"\r\n            onClick={()=>{\r\n              this.setState({\r\n                showForm: true\r\n              })\r\n            }}\r\n          />\r\n          {this.state.showForm ?\r\n            <div style={{paddingLeft: \"20px\"}}>\r\n              <div className=\"row pt-3\">\r\n                <div className=\"col-8\">\r\n                  <h4 className=\"text-white\">Add an Image</h4>\r\n                  <input type=\"file\" onChange={(e)=>{this.setState({\r\n                    image: e.target.files[0],\r\n                  })}} />\r\n                </div>\r\n                <div className=\"col-2 pt-3\">\r\n                  <button value=\"submit\" className=\"btn btn-success\" type=\"submit\">Post</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            :null\r\n          }\r\n        </form>\r\n\r\n        <div id=\"feedWrapper\">\r\n          {this.state.posts.map((post)=>(\r\n            this.renderPost(post)\r\n          ))}\r\n        </div>\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Feed;","import React, { Component } from 'react';\r\nimport {ROOMS_ENDPOINT} from '../settings';\r\nimport { checkToken } from '../auth/auth';\r\nimport {getCookie} from '../utility';\r\nimport Chat from './Chat';\r\nimport Feed from './Feed';\r\nimport './main.css';\r\n\r\n\r\nclass Room extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      room      : {},\r\n      isAdmin   : false,\r\n      members   : [],\r\n      editing   : false,\r\n      confirming: false,\r\n      message   : {},\r\n      showChat  : false,\r\n    };\r\n    this.feedElement = React.createRef();\r\n    this.roomId                  = this.props.match.params.roomId;\r\n    this.fetchRoom               = this.fetchRoom.bind(this);\r\n    this.handleFormChange        = this.handleFormChange.bind(this);\r\n    this.renderSettings          = this.renderSettings.bind(this);\r\n    this.fetchUpdateRoom         = this.fetchUpdateRoom.bind(this);\r\n    this.handleFormSubmit        = this.handleFormSubmit.bind(this);\r\n    this.renderPopupConfirmation = this.renderPopupConfirmation.bind(this);\r\n    this.handleDeleteRoomClick   = this.handleDeleteRoomClick.bind(this);\r\n    this.fetchLeaveRoom          = this.fetchLeaveRoom.bind(this);\r\n    this.setMessageCallback      = this.setMessageCallback.bind(this);\r\n  }\r\n\r\n  componentDidMount(){\r\n    if(!checkToken()){\r\n      this.props.history.push(\"/login\");\r\n    } else {\r\n      this.fetchRoom(false);\r\n    }\r\n  }\r\n\r\n  fetchRoom(editing){\r\n    const url = ROOMS_ENDPOINT + this.roomId;\r\n    fetch(url).then(response => {\r\n      if(!response.ok){\r\n        window.location.replace('/rooms/create');\r\n      }\r\n      return response.json();\r\n    }).then(data=>{\r\n      this.setState({\r\n        room: data.room,\r\n        isAdmin: data.isAdmin,\r\n        members: data.members,\r\n        editing: editing,\r\n      });\r\n    });\r\n  }\r\n  setMessageCallback(message){\r\n    this.setState({\r\n      message: message,\r\n    })\r\n  }\r\n\r\n  fetchLeaveRoom(){\r\n    const url = ROOMS_ENDPOINT + this.roomId + \"/leave\";\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"X-CSRFToken\": getCookie(\"csrftoken\"),\r\n      },\r\n      body: JSON.stringify({\r\n        token: localStorage.getItem(\"token\"),\r\n      })\r\n    };\r\n    fetch(url, requestOptions).then(response => {\r\n      if(response.ok){\r\n        window.location.replace(\"/\");\r\n      } else {\r\n        this.setState({\r\n          message: {\r\n            type: \"danger\",\r\n            content: \"Something went wrong try again later..\"\r\n          }\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  fetchUpdateRoom(){\r\n    const url = ROOMS_ENDPOINT+ \"update\";\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"X-CSRFToken\": getCookie(\"csrftoken\"),\r\n      },\r\n      body: JSON.stringify({\r\n        room: this.state.room,\r\n      })\r\n    };\r\n    fetch(url, requestOptions).then(response => response.json()).then(data=>{\r\n      if(data.error){\r\n        this.setState({\r\n          message: {\r\n            type: \"danger\",\r\n            content: data.error\r\n          }\r\n        });\r\n        this.fetchRoom(true);\r\n      }\r\n      if(data.id){\r\n        this.setState({\r\n          editing: false,\r\n          message: {\r\n            type: \"success\",\r\n            content: \"Successfully Updated..\"\r\n          }\r\n        });\r\n        this.fetchRoom(false);\r\n      }\r\n    })\r\n  }\r\n\r\n  handleFormSubmit(e){\r\n    e.preventDefault();\r\n    this.fetchUpdateRoom();\r\n  }\r\n\r\n  handleFormChange(e){\r\n    this.setState({\r\n      room: {\r\n        ...this.state.room,\r\n        [e.target.name]: e.target.value,\r\n      }\r\n    })\r\n  }\r\n\r\n  handleDeleteRoomClick(){\r\n    const url = ROOMS_ENDPOINT + \"delete/\" + this.state.room.id;\r\n    fetch(url).then(response => {\r\n      if(response.ok){\r\n        window.location.replace(\"/\");\r\n      }\r\n    })\r\n  }\r\n\r\n  renderPopupConfirmation(){\r\n    return(\r\n      <div className=\"popup\">\r\n        <div className=\"row border-bottom border-2 pb-4\">\r\n          <div className=\"col-10\">\r\n            <legend className=\"display-6\">\r\n              Confirm Delete Room\r\n            </legend>\r\n          </div>\r\n          <div className=\"col-1\">\r\n            <span className=\"bi bi-x icon\" onClick={()=>this.setState({confirming: false})} />\r\n          </div>\r\n        </div>\r\n        <div className=\"pt-4\">\r\n          <p>\r\n            Are you sure to delete this Room?<br />\r\n          </p>\r\n        </div>\r\n        <div className=\"row pt-3\">\r\n          <button className=\"btn btn-danger\" onClick={this.handleDeleteRoomClick} >\r\n            Delete Room\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderSettings(){\r\n    return(\r\n      <div className=\"container mt-2\">\r\n        {this.state.confirming ? this.renderPopupConfirmation():null}\r\n        <div className=\"profile-wrapper\">\r\n          <div className=\"row pb-3 border-bottom border-2\">\r\n            <div align=\"left\">\r\n              <legend className=\"display-6\">\r\n                {this.state.room.name}\r\n              </legend>    \r\n            </div>\r\n          </div>\r\n          <div className=\"mt-3\">\r\n            <form onSubmit={this.handleFormSubmit}>\r\n              <div className=\"pt-3 pb-3\">\r\n                <label className=\"label\">\r\n                  Room Name*\r\n                </label>\r\n                <input type=\"text\" required className=\"form-control\" value={this.state.room.name}\r\n                  placeholder=\"Room Name\"\r\n                  onChange={this.handleFormChange}\r\n                  name=\"name\"\r\n                />\r\n              </div>\r\n              <div className=\"pt-3 pb-3\">\r\n                <label className=\"label\">\r\n                  Maximum Members\r\n                </label>\r\n                <input type=\"number\" required className=\"form-control\" value={this.state.room.max_members}\r\n                  placeholder=\"max members\"\r\n                  onChange={this.handleFormChange}\r\n                  name=\"max_members\"\r\n                />\r\n              </div>\r\n              <div className=\"pt-3 pb-3\">\r\n                <label className=\"label\">\r\n                  Description*\r\n                </label>\r\n                <textarea type=\"text\" className=\"form-control\" value={this.state.room.description}\r\n                  placeholder=\"description\"\r\n                  onChange={this.handleFormChange}\r\n                  name=\"description\"\r\n                  height=\"120\"\r\n                />\r\n              </div>\r\n              <div align=\"center\">\r\n                <div className=\"row mt-3 mb-5\">\r\n                  <div className=\"col-6\">\r\n                    <button className=\"btn btn-danger\" onClick={()=>{this.setState({editing: false, confirming: false})}}>\r\n                      Back\r\n                    </button>\r\n                  </div>\r\n                  <div className=\"col-6\">\r\n                    <button className=\"btn btn-success\" type=\"submit\">\r\n                      Update\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n          <div className=\"row pt-3 border-top border-light border-2\">\r\n            <button type=\"submit\" className=\"btn btn-danger\" onClick={()=>{\r\n              this.setState({confirming: true});\r\n              }}>\r\n              Delete Room <span className=\"bi bi-trash-fill\" style={{color: 'white', padding: '10px'}}/>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>  \r\n    );\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <div className=\"container pt-2\">\r\n        {\r\n          this.state.message.content ? \r\n            <div className={`alert alert-${this.state.message.type} pb-3`} id=\"profile-msg\" role=\"alert\">\r\n              {this.state.message.content}\r\n              <i className=\"bi bi-x\" id=\"delete-profile-msg\" onClick={()=>{this.setState({message: {}})}}/>\r\n            </div>\r\n          : null\r\n        }\r\n        {this.state.editing ? this.renderSettings():\r\n        <div>\r\n          <div className=\"profile-wrapper\">\r\n            <div className=\"row border-bottom border-light border-2\" align=\"left\">\r\n              <legend className=\"display-6 col-7\" >{this.state.room.name}</legend>\r\n              <div className=\"dropdown col-5\">\r\n                <span className=\"dropdown-toggle bi bi-three-dots-vertical\" type=\"button\" id=\"dropdownMenuButton1\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\" style={{float: \"right\"}}/>\r\n                {this.state.isAdmin ? \r\n                  <ul className=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton1\">\r\n                    <li><a className=\"dropdown-item\" href=\"add-user\"><span className=\"bi bi-person-plus\" />  Add Member</a></li>\r\n                    <li><span className=\"dropdown-item\" onClick={()=>(this.feedElement.current ? this.feedElement.current.setState({showForm: true}) : null)}><span className=\"bi bi-file-post\" />   New Post</span></li>\r\n\r\n                    <li><span className=\"dropdown-item\" onClick={()=>this.setState({editing: true})}><span className=\"bi bi-gear\"/>  Settings</span></li>\r\n                    <li><a className=\"dropdown-item\" href=\"members\"><span className=\"bi bi-person\" />   Members</a></li>\r\n                  </ul>\r\n                  :\r\n                  <ul className=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton1\">\r\n                    <li><a className=\"dropdown-item\" href=\"members\"><span className=\"bi bi-person\" />   Members</a></li>\r\n                    <li><span className=\"dropdown-item\" onClick={()=>(this.feedElement.current ? this.feedElement.current.setState({showForm: true}) : null)}><span className=\"bi bi-file-post\" />   New Post</span></li>\r\n                    <li><a className=\"dropdown-item\" href=\"#leave\" onClick={this.fetchLeaveRoom}><span className=\"bi bi-box-arrow-right\" />   Leave</a></li>\r\n                  </ul>\r\n                }\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-8\">\r\n                <small className=\"text-light\">{this.state.room.description}</small>\r\n              </div>\r\n              <div className=\"col-4\">\r\n                <a className=\"text-light\" href=\"members\" >\r\n                  Members: {this.state.members.length}/{this.state.room.max_members}\r\n                  {this.state.members.length === this.state.room.max_members ? <small className=\"text-danger\">   Full</small> : null}\r\n                </a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"pt-3\">\r\n            <div className=\"row border-bottom\" style={{padding: \"5px\"}}>\r\n              <div className=\"col-5\" style={{marginLeft: \"60px\"}}>\r\n                <span className=\"bi bi-newspaper\" id=\"navbtn\" onClick={()=>{this.setState({showChat: false})}}>   Feed</span>\r\n              </div>\r\n              <div className=\"col-5\" style={{marginLeft: \"10px\"}}>\r\n                <span className=\"bi bi-chat\" id=\"navbtn\" onClick={()=>this.setState({showChat: true})}>   Chats</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {this.state.showChat ? \r\n            this.state.room.name ?\r\n              <Chat roomId={this.roomId} name={this.state.room.name} admin={this.state.room.admin} /> \r\n\r\n            : <span className=\"bi bi-hourglass-split\" />\r\n            \r\n          : <Feed roomId={this.roomId} ref={this.feedElement} admin={this.state.room.admin} msgCallback={this.setMessageCallback} />}\r\n        </div>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Room;","import React, { Component } from 'react';\r\nimport { AUTH_ENDPOINT, ROOMS_ENDPOINT } from '../settings';\r\nimport { getCookie} from '../utility';\r\nimport {checkToken} from '../auth/auth';\r\nimport './main.css';\r\n\r\nclass Users extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      users: [],\r\n      error: null,\r\n      searchUsers: [],\r\n      searchTerm: '',\r\n    }\r\n    this.roomId = this.props.match.params.roomId;\r\n    this.fetchAddUser = this.fetchAddUser.bind(this);\r\n    this.fetchUsers = this.fetchUsers.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  componentDidMount(){\r\n    if(checkToken()){\r\n      this.fetchUsers();\r\n    } else {\r\n      window.location.replace(\"/login\");\r\n    }\r\n  }\r\n\r\n  fetchAddUser(user){\r\n    const url = ROOMS_ENDPOINT + this.roomId + \"/add-user\";\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"X-CSRFToken\": getCookie(\"csrftoken\")  \r\n      },\r\n      body: JSON.stringify({\r\n        user: user\r\n      })\r\n    };\r\n    fetch(url, requestOptions).then(res => res.json()).then(data=>{\r\n      if(data.error){\r\n        this.setState({\r\n          error: data.error\r\n        })\r\n      } else {\r\n        window.location.replace(\"/room/\"+ data.id)\r\n      }\r\n    });\r\n  }\r\n\r\n  fetchUsers(){\r\n    const url = AUTH_ENDPOINT + \"\";\r\n    fetch(url).then(response => response.json()).then(data =>{\r\n      this.setState({users: data, searchUsers:data})\r\n    });\r\n  }\r\n\r\n  handleChange(e){\r\n    const searchTerm = e.target.value;\r\n    if(searchTerm){\r\n      const results = [];\r\n      this.state.users.map(user=>{\r\n        if(user.username.toLowerCase().includes(searchTerm.toLowerCase())){\r\n          results.push(user);\r\n        }\r\n      })\r\n      this.setState({\r\n        searchUsers: results,\r\n      })\r\n    } else{\r\n      this.setState({\r\n        searchUsers: this.state.users,\r\n      })\r\n    }\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <div className=\"container\">\r\n        {\r\n          this.state.error ? \r\n            <div className={`alert alert-danger pb-3`} id=\"profile-msg\" role=\"alert\">\r\n              {this.state.error}\r\n              <i className=\"bi bi-x\" id=\"delete-profile-msg\" onClick={()=>{this.setState({error: null})}}/>\r\n            </div>\r\n          : null\r\n        }\r\n        <div className=\"profile-wrapper\">\r\n          <div className=\"row border-bottom border-light border-2\" align=\"left\">\r\n            <legend className=\"display-6\">\r\n              Users\r\n            </legend>\r\n          </div>\r\n          <div className=\"pt-2 pb-2\" style={{padding: \"20px\"}}>\r\n            <form className=\"row\">\r\n              <input className=\"form-control\" type=\"text\" onChange={this.handleChange} placeholder=\"Search for user\" />\r\n            </form>\r\n          </div>\r\n          <div className=\"pt-4\">\r\n            {this.state.searchUsers.map((user)=>{\r\n              return(\r\n                <div className=\"roomDiv\">\r\n                  <div className=\"row\">\r\n                    <div className=\"col-3\">\r\n                      <img src={user.profile} className=\"rounded-circle\" alt=\"profile\" width=\"60\" height=\"60\" />\r\n                    </div>\r\n                    <div className=\"col-6 pt-3\">\r\n                      <a href={`/users/${user.id}`}>\r\n                        <legend className=\"display-6 text-dark\">\r\n                          {user.username}\r\n                        </legend>\r\n                      </a>\r\n                    </div>\r\n                    <div className=\"col-1 pt-2 pl-4\">\r\n                      <span className=\"bi bi-plus add-mem\" onClick={()=>this.fetchAddUser(user)} />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Users;","import React from 'react';\r\nimport { checkToken } from '../auth/auth';\r\nimport {ROOMS_ENDPOINT} from '../settings';\r\nimport { getCookie} from '../utility';\r\nimport './main.css';\r\n\r\n\r\nclass Members extends React.Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      members : [],\r\n      roomName: null,\r\n      success : null,\r\n      admin   : null,\r\n      isAdmin : false\r\n    };\r\n    this.roomId = this.props.match.params.roomId;\r\n    this.fetchMembers = this.fetchMembers.bind(this);\r\n    this.fetchDeleteMember = this.fetchDeleteMember.bind(this);\r\n  }\r\n  componentDidMount(){\r\n    if(checkToken()){\r\n      this.fetchMembers();\r\n    } else {\r\n      window.location.replace('/login');\r\n    }\r\n  }\r\n\r\n  fetchMembers(){\r\n    const url = ROOMS_ENDPOINT + this.roomId + \"/members\";\r\n    fetch(url).then(response => response.json()).then(data=> {\r\n      this.setState({\r\n        members: data.members,\r\n        roomName: data.roomName,\r\n        admin: data.admin,\r\n        isAdmin: data.isAdmin\r\n      });\r\n    })\r\n  }\r\n\r\n  fetchDeleteMember(member){\r\n    const url = ROOMS_ENDPOINT + this.roomId + \"/remove-user\";\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"X-CSRFToken\": getCookie(\"csrftoken\")\r\n      },\r\n      body: JSON.stringify({\r\n        member: member\r\n      })\r\n    };\r\n\r\n    fetch(url, requestOptions).then(response => {\r\n      if (response.ok){\r\n        this.setState({\r\n          success: \"Member removed successfully...\"\r\n        });\r\n        this.fetchMembers();\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <div className=\"container\">\r\n        {\r\n          this.state.success ? \r\n            <div className={`alert alert-success pb-3`} id=\"profile-msg\" role=\"alert\">\r\n              {this.state.success}\r\n              <i className=\"bi bi-x\" id=\"delete-profile-msg\" onClick={()=>{this.setState({success: null})}}/>\r\n            </div>\r\n          : null\r\n        }\r\n        <div className=\"profile-wrapper\">\r\n          <div className=\"row border-bottom border-2 border-light\">\r\n            <legend className=\"display-6 pb-3\">\r\n              {this.state.roomName} Members\r\n            </legend>\r\n          </div>\r\n          <div className=\"container pt-2\">\r\n            {\r\n              this.state.members.map((member)=>{\r\n                return(\r\n                  <div className=\"roomDiv row\">\r\n                    <div className=\"col-3\">\r\n                      <img src={member.profile} className=\"rounded-circle\" alt=\"profile\" width=\"60\" height=\"60\" />\r\n                    </div>\r\n                    <div className=\"col-6 pt-3\">\r\n                      <a href={`/users/${member.id}`}>\r\n                        <legend className=\"display-6 text-dark\">\r\n                          {member.username}\r\n                        </legend>\r\n                      </a>\r\n                    </div>\r\n                    <div className=\"col-1 pt-2 pl-4\">\r\n                      {member.id !== this.state.admin.id ? \r\n                        this.state.isAdmin ? <span className=\"bi bi-person-dash add-mem\" onClick={()=>{this.fetchDeleteMember(member)}} /> : null\r\n                        : <span className=\"bi bi-star-fill\" style={{color: \"yellow\", fontSize: \"24px\"}} />\r\n                      }\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })\r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Members;","import React from 'react';\r\nimport { Route } from 'react-router-dom';\r\nimport Login from './Login';\r\nimport Home from './Home';\r\nimport Register from './Register';\r\nimport VisitProfile from './VisitProfile';\r\nimport Navbar from './Navbar';\r\nimport CreateRoom from './CreateRoom';\r\nimport Room from './Room';\r\nimport Users from './Users';\r\nimport Members from './Members'\r\n\r\nconst BaseRouter = (authenticated) => (\r\n  <div>\r\n    <Navbar authenticated={authenticated} />\r\n    <Route exact path=\"/\" component={Home} />\r\n    <Route exact path=\"/login\" component={Login} />\r\n    <Route exact path=\"/signup\" component={Register} />\r\n    <Route exact path=\"/users/:userId\" component={VisitProfile} />\r\n    <Route exact path=\"/rooms/create\" component={CreateRoom} />\r\n    <Route exact path=\"/room/:roomId\" component={Room} />\r\n    <Route exact path=\"/room/:roomId/add-user\" component={Users} />\r\n    <Route exact path=\"/room/:roomId/members\" component={Members} />\r\n  </div>\r\n\r\n);\r\n\r\nexport default BaseRouter;\r\n","import React, { Component } from 'react';\r\nimport BaseRouter from './Router';\r\nimport {authCheckState, checkToken} from '../auth/auth';\r\nimport {BrowserRouter as Router} from 'react-router-dom';\r\nimport './main.css';\r\n\r\nclass App extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      authenticated: null,\r\n    }\r\n  }\r\n  componentDidMount(){\r\n    const checkValidUser = authCheckState();\r\n    checkValidUser();\r\n    this.setState({\r\n      authenticated: checkToken()\r\n    })\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <div>\r\n        {this.state.authenticated !== null ?\r\n          <Router>\r\n            <BaseRouter authenticated={this.state.authenticated} />\r\n          </Router> : <span>LOADING...</span>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App';\r\n\r\nconst app = document.getElementById('root');\r\nReactDOM.render(<App/>, app)\r\n"],"sourceRoot":""}